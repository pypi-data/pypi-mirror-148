(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{137:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(15),i=a(4),o=a.n(i),s=a(3),c=a(5),l=a.n(c),d=a(7),u=a(8),b=a(12),j=a(51),p=function(){var e=sessionStorage.getItem("sessionId");return null==e&&(e=Object(j.v4)(),sessionStorage.setItem("sessionId",e)),e},f=function(e){"undefined"!==typeof e&&e?o.a.defaults.headers.common.Authorization="Token "+e:delete o.a.defaults.headers.common.Authorization},h=null;localStorage.getItem("token")&&(h=localStorage.getItem("token"),f(h));var m={token:h,username:"",user:{pk:0,username:"",first_name:"",last_name:"",email:""}},v=Object(u.b)({name:"auth",initialState:m,reducers:{setToken:function(e,t){e.token=t.payload,f(e.token),e.token?localStorage.setItem("token",e.token):localStorage.removeItem("token")},setUsername:function(e,t){e.username=t.payload?t.payload:"",e.username&&""!==e.username?localStorage.setItem("username",e.username):localStorage.removeItem("username")},setUserInfo:function(e,t){e.user=t.payload}}}),x=v.reducer,g=v.actions,O=g.setToken,y=g.setUsername,w=(g.setUserInfo,function(e){return e.auth.token}),k=function(e){return e.auth.username},N=Object(u.b)({name:"version",initialState:{fetchingIsPro:!0,isPro:!1,welcome:""},reducers:{setVersion:function(e,t){var a=t.payload.isPro;e.isPro=a,e.fetchingIsPro=!1},setWelcome:function(e,t){e.welcome=t.payload}}}),S=N.reducer,C=N.actions,T=C.setVersion,P=(C.setWelcome,function(e){return e.version.isPro}),I=a(17),R=(a(89),Object(u.b)({name:"app",initialState:{view:"app",files:[],filesState:"unknown",showSideBar:!0},reducers:{setView:function(e,t){e.view=t.payload},setFilesState:function(e,t){e.filesState=t.payload},setFiles:function(e,t){e.files=t.payload},setShowSideBar:function(e,t){e.showSideBar=t.payload},toggleShowSideBar:function(e){e.showSideBar=!e.showSideBar}}})),A=R.reducer,E=R.actions,F=E.setView,M=E.setFilesState,L=E.setFiles,W=E.setShowSideBar,H=(E.toggleShowSideBar,function(e){return e.app.view}),_=function(e){return e.app.filesState},B=function(e){return e.app.files},z=function(e){return e.app.showSideBar},D=a(1);function K(){return Object(D.jsx)("div",{style:{color:"white",padding:"5px",float:"right"},children:Object(D.jsxs)("a",{href:"/login",className:"btn btn-primary btn-sm ",children:[Object(D.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})})}var U=a(143);function V(e){var t=e.username,a=Object(s.b)(),n=Object(U.a)();return Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:"dropdown",style:{float:"right"},children:[Object(D.jsx)("a",{className:"btn btn-secondary btn-sm dropdown-toggle",style:{margin:"5px"},href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false",children:t}),Object(D.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuLink",children:[Object(D.jsx)("li",{children:Object(D.jsxs)("a",{className:"dropdown-item",href:"/account",children:[Object(D.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]})}),Object(D.jsx)("li",{children:Object(D.jsx)("hr",{className:"dropdown-divider"})}),Object(D.jsx)("li",{children:Object(D.jsxs)("a",{className:"dropdown-item",onClick:function(){return a(function(e){return function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,o.a.post("/api/v1/auth/logout/");case 4:b.b.success("Log out successfull"),a(O("")),a(y("")),e.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),b.b.error("Problem during log out");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(n))},children:[Object(D.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})," Log out"]})})]})]})})}function Y(e){var t=e.showFiles,a=e.isPro,n=e.username,r=Object(s.b)();return Object(D.jsxs)("header",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0",children:[Object(D.jsxs)("a",{className:"navbar-brand col-md-3 col-lg-3 me-0 px-3",href:"/",children:[Object(D.jsx)("i",{className:"fa fa-home","aria-hidden":"true"})," "," ",Object(D.jsx)("img",{alt:"Mercury",src:"/example/to/replace/static/mercury_logo.svg",style:{height:"24px"}})]}),t&&Object(D.jsxs)("ul",{className:"nav col-12 col-lg-auto me-lg-auto mb-2 mb-md-0",children:[Object(D.jsx)("li",{children:Object(D.jsxs)("button",{className:"nav-link px-2 text-white",style:{background:"transparent",border:"none",fontSize:"0.9em"},onClick:function(){r(F("app"))},children:[Object(D.jsx)("i",{className:"fa fa-laptop","aria-hidden":"true"})," App"]})}),Object(D.jsx)("li",{children:Object(D.jsxs)("button",{className:"nav-link px-2 text-white",style:{background:"transparent",border:"none",fontSize:"0.9em"},onClick:function(){r(F("files"))},children:[Object(D.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," Output Files"]})})]}),a&&""===n&&Object(D.jsx)(K,{}),a&&""!==n&&Object(D.jsx)(V,{username:n})]})}var J=a(6),q=a(25);function G(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var Q=Object(u.b)({name:"notebooks",initialState:{notebooks:[],loadingState:"loading",selectedNotebook:{},loadingStateSelected:"loading",watchModeCounter:0,slidesHash:""},reducers:{setNotebooks:function(e,t){e.notebooks=t.payload},setLoadingState:function(e,t){e.loadingState=t.payload},setSelectedNotebook:function(e,t){t.payload.state.startsWith("WATCH")&&e.selectedNotebook.file_updated_at===t.payload.file_updated_at||(e.selectedNotebook=t.payload),t.payload.state.startsWith("WATCH")&&(e.watchModeCounter+=1)},setLoadingStateSelected:function(e,t){e.loadingStateSelected=t.payload},setSlidesHash:function(e,t){e.slidesHash=t.payload}}}),X=Q.reducer,Z=Q.actions,$=(Z.setNotebooks,Z.setLoadingState,Z.setSelectedNotebook),ee=Z.setLoadingStateSelected,te=Z.setSlidesHash,ae=function(e){return e.notebooks.selectedNotebook},ne=function(e){return e.notebooks.loadingStateSelected},re=function(e){return e.notebooks.watchModeCounter},ie=function(e){return e.notebooks.slidesHash},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(d.a)(l.a.mark((function a(n){var r,i,s,c,d,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(te("")),r=G(),i=r.width,n(W(i>992)),t||n(ee("loading")),s="/api/v1/notebooks/".concat(e,"/"),a.next=8,o.a.get(s);case 8:c=a.sent,d=c.data,u=JSON.parse(d.params),n($(Object(J.a)(Object(J.a)({},d),{},{params:u}))),t||n(ee("loaded")),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(0),t||n(ee("error")),console.error("Problem during loading selected notebook (".concat(e,"). ").concat(a.t0));case 19:case"end":return a.stop()}}),a,null,[[0,15]])})));return function(e){return a.apply(this,arguments)}}()},se=Object(u.b)({name:"tasks",initialState:{currentTask:{}},reducers:{setCurrentTask:function(e,t){e.currentTask=t.payload}}}),ce=se.reducer,le=se.actions.setCurrentTask,de=function(e){return e.tasks.currentTask},ue=function(e){return function(){var t=Object(d.a)(l.a.mark((function t(a){var n,r,i,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p(),t.prev=1,r="/api/v1/latest_task/".concat(e,"/").concat(n),t.next=5,o.a.get(r);case 5:i=t.sent,s=i.data,a(le(s)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a(le({}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},be=function(){try{var e,t,a=document.getElementById("main-iframe"),n=null===a||void 0===a||null===(e=a.contentWindow)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.hash;if(n)return n}catch(r){}return""},je=Object(u.b)({name:"widgets",initialState:{widgets:{}},reducers:{setWidgetValue:function(e,t){var a=t.payload,n=a.key,r=a.value;e.widgets[n]=r},clearWidgets:function(e){e.widgets={}}}}),pe=je.reducer,fe=je.actions,he=fe.setWidgetValue,me=(fe.clearWidgets,function(e){return e.widgets.widgets});function ve(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.disabled,i=Object(s.b)();return Object(D.jsxs)("div",{className:"form-group form-check form-switch mb-3",children:[Object(D.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-".concat(a),disabled:r,onChange:function(){i(he({key:t,value:!n}))},checked:null!=n&&n}),Object(D.jsx)("label",{className:"form-check-label",htmlFor:"checkbox-".concat(a),children:a})]})}var xe=a(53),ge=a.n(xe);function Oe(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,i=e.max,o=e.step,c=e.disabled,l=Object(s.b)(),d=0,u=100,b=1;return r&&(d=r),i&&(u=i),o&&(b=o),Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsx)("label",{htmlFor:"checkbox-".concat(a),children:a}),Object(D.jsx)(ge.a,{className:"form-control",disabled:c,value:n,min:d,max:u,step:b,onChange:function(e){l(he({key:t,value:e}))}})]})}var ye=a(20);function we(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,i=e.max,o=e.step,c=(e.vertical,e.disabled),l=Object(s.b)(),d=0,u=100,b=1;r&&(d=r),i&&(u=i),o&&(b=o);var j=null!=n&&void 0!==n&&2===n.length?n:[d,u];return Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsx)("label",{htmlFor:"range-slider-".concat(a),children:a}),Object(D.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(D.jsx)(ye.Range,{disabled:c,values:j,step:b,min:d,max:u,onChange:function(e){l(he({key:t,value:e}))},renderTrack:function(e){var t=e.props,a=e.children;return Object(D.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(J.a)(Object(J.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(D.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(ye.getTrackBackground)({values:j,colors:["#ccc",c?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:d,max:u}),alignSelf:"center"},children:[a,Object(D.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(D.jsx)("div",{style:{float:"left"},children:d}),Object(D.jsx)("div",{style:{float:"right"},children:u})]})]})})},renderThumb:function(e){var t=e.index,a=e.props,n=e.isDragged;return Object(D.jsxs)("div",Object(J.a)(Object(J.a)({},a),{},{style:Object(J.a)(Object(J.a)({},a.style),{},{height:"18px",width:"18px",border:"None !important",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(D.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:c?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:j[t]}),Object(D.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:n?"#2684ff":"#CCC"}})]}))}})})]})}var ke=a(58);function Ne(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.choices,i=e.multi,o=e.disabled,c=Object(s.b)(),l={menu:function(e){return Object(J.a)(Object(J.a)({},e),{},{zIndex:100})}},d={value:"",label:""},u=[{value:"",label:""}],b=r.map((function(e){return n&&e===n&&!i&&(d={value:e,label:e}),{value:e,label:e}}));return i&&(u=[],r.map((function(e){return n&&n.includes(e)&&i&&u.push({value:e,label:e}),{value:e,label:e}}))),Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsx)("label",{htmlFor:"select-".concat(a),children:a}),Object(D.jsx)(ke.a,{id:"select-".concat(a),isDisabled:o,name:a||"Select",styles:l,value:i?u:d,options:b,isMulti:i,onChange:function(e){if(e)if(function(e){return void 0!==e.value}(e))c(he({key:t,value:e.value}));else{var a=Array.from(e.values()).filter((function(e){return void 0!==e}));c(he({key:t,value:a.map((function(e){return e.value}))}))}}})]})}function Se(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,i=e.max,o=e.step,c=(e.vertical,e.disabled),l=Object(s.b)(),d=0,u=100,b=1;r&&(d=r),i&&(u=i),o&&(b=o);var j=[null!==n?n:u];return Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsx)("label",{htmlFor:"slider-".concat(a),children:a}),Object(D.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(D.jsx)(ye.Range,{disabled:c,values:j,step:b,min:d,max:u,onChange:function(e){l(he({key:t,value:e[0]}))},renderTrack:function(e){var t=e.props,a=e.children;return Object(D.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(J.a)(Object(J.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(D.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(ye.getTrackBackground)({values:j,colors:[c?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:d,max:u}),alignSelf:"center"},children:[a,Object(D.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(D.jsx)("div",{style:{float:"left"},children:d}),Object(D.jsx)("div",{style:{float:"right"},children:u})]})]})})},renderThumb:function(e){var t=e.props,a=e.isDragged;return Object(D.jsxs)("div",Object(J.a)(Object(J.a)({},t),{},{style:Object(J.a)(Object(J.a)({},t.style),{},{height:"18px",width:"18px",border:"None",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(D.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:c?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:j[0]}),Object(D.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:a?"#2684ff":"#CCC"}})]}))}})})]})}var Ce=a(26),Te=a.n(Ce);function Pe(e){return"checkbox"===e.input}function Ie(e){return"numeric"===e.input}function Re(e){return"slider"===e.input}function Ae(e){return"range"===e.input}function Ee(e){return"file"===e.input}function Fe(e){return"text"===e.input}var Me=a(32),Le=a(54),We=a.n(Le),He=a(55),_e=a.n(He),Be=a(56),ze=a.n(Be);function De(e){var t=e.widgetKey,a=e.label,n=e.maxFileSize,r=e.disabled,i=Object(s.b)(),c="100MB";return n&&(c=n),Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsx)("label",{htmlFor:"file-".concat(a),children:a}),Object(D.jsx)("div",{children:Object(D.jsx)(Me.FilePond,{disabled:r,maxFileSize:c,onprocessfile:function(e,a){i(he({key:t,value:a.serverId}))},server:{url:"".concat(o.a.defaults.baseURL,"/api/v1/fp"),process:"/process/",revert:function(){var e=Object(d.a)(l.a.mark((function e(a,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("".concat(o.a.defaults.baseURL,"/api/v1/fp/revert"),{data:a});case 3:i(he({key:t,value:[]})),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r("Problem with uploaded file removal");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},labelIdle:'Drag & Drop your file or <span class="filepond--label-action">Browse</span>'})})]})}function Ke(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.rows,i=e.disabled,o=Object(s.b)(),c=r||1,l=function(e){return e.replace(/["'(){}[\]`^:]/gim,"")};return Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsx)("label",{htmlFor:"textarea-".concat(a),children:a}),1===c&&Object(D.jsx)("input",{className:"form-control",type:"text",id:"text-".concat(a),value:n||"",onChange:function(e){o(he({key:t,value:l(e.target.value)}))},disabled:i}),c>1&&Object(D.jsx)("textarea",{className:"form-control",id:"text-area-".concat(a),rows:c,value:n||"",onChange:function(e){o(he({key:t,value:l(e.target.value)}))},disabled:i})]})}function Ue(e){var t=e.notebookTitle,a=e.notebookId,r=(e.loadingState,e.waiting),i=e.widgetsParams,c=e.watchMode,u=e.notebookPath,j=e.displayEmbed,f=Object(s.b)(),h=Object(s.c)(me);Object(n.useEffect)((function(){if(i)for(var e=0,t=Object.entries(i);e<t.length;e++){var a=Object(I.a)(t[e],2),n=a[0],r=a[1];"file"===r.input?f(he({key:n,value:[]})):"text"===r.input?f(he({key:n,value:r.value?r.value:""})):f(he({key:n,value:r.value}))}}),[f,i]);var m=[],v=[];if(i)for(var x=0,g=Object.entries(i);x<g.length;x++){var O=Object(I.a)(g[x],2),y=O[0],w=O[1];"select"===w.input?m.push(Object(D.jsx)(Ne,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,value:h[y],choices:null===w||void 0===w?void 0:w.choices,multi:null===w||void 0===w?void 0:w.multi},y)):Pe(w)?m.push(Object(D.jsx)(ve,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,value:h[y]},y)):Ie(w)?m.push(Object(D.jsx)(Oe,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,value:h[y],min:null===w||void 0===w?void 0:w.min,max:null===w||void 0===w?void 0:w.max,step:null===w||void 0===w?void 0:w.step},y)):Re(w)?m.push(Object(D.jsx)(Se,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,value:h[y],min:null===w||void 0===w?void 0:w.min,max:null===w||void 0===w?void 0:w.max,step:null===w||void 0===w?void 0:w.step,vertical:null===w||void 0===w?void 0:w.vertical},y)):Ae(w)?m.push(Object(D.jsx)(we,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,value:h[y],min:null===w||void 0===w?void 0:w.min,max:null===w||void 0===w?void 0:w.max,step:null===w||void 0===w?void 0:w.step,vertical:null===w||void 0===w?void 0:w.vertical},y)):Ee(w)?(m.push(Object(D.jsx)(De,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,maxFileSize:null===w||void 0===w?void 0:w.maxFileSize},y)),v.push(y)):Fe(w)&&m.push(Object(D.jsx)(Ke,{widgetKey:y,disabled:r,label:null===w||void 0===w?void 0:w.label,value:h[y],rows:null===w||void 0===w?void 0:w.rows},y))}var k=function(){if(0===v.length)return!0;var e,t=Object(q.a)(v);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(!Object.prototype.hasOwnProperty.call(h,a))return!1;if(0===h[a].length)return!1}}catch(n){t.e(n)}finally{t.f()}return!0},N={};return j&&(N={padding:"0px"}),Object(D.jsx)("nav",{id:"sidebarMenu",className:"col-lg-3 d-md-block bg-light sidebar",style:Object(J.a)(Object(J.a)({},N),{},{overflowY:"auto"}),children:Object(D.jsxs)("div",{className:"position-sticky p-3",children:[Object(D.jsxs)("h4",{children:[t,Object(D.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{float:"right",zIndex:"101"},onClick:function(){return f(W(!1))},"data-toggle":"tooltip","data-placement":"right",title:"Hide sidebar",children:Object(D.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true"})})]}),Object(D.jsx)("div",{style:{padding:"0px"},children:Object(D.jsxs)("form",{children:[m,Object(D.jsxs)("div",{className:"form-group mb-3",children:[Object(D.jsxs)("button",{type:"button",className:"btn btn-success",style:{marginRight:"10px",width:"47%"},onClick:function(){return f(function(e){return function(){var t=Object(d.a)(l.a.mark((function t(a,n){var r,i,s,c,d,u,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().widgets.widgets,i=p(),s=be(),a(te(s)),t.prev=4,c={session_id:i,params:JSON.stringify(r)},d="/api/v1/execute/".concat(e),t.next=9,o.a.post(d,c);case 9:u=t.sent,b=u.data,a(le(b)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.error("Problem during notebook execution. ".concat(t.t0));case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))},disabled:r||!k(),children:[Object(D.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})," Run"]}),Object(D.jsxs)("button",{style:{width:"47%",float:"right"},type:"button",className:"btn btn-primary",disabled:r,onClick:function(){return e="".concat(o.a.defaults.baseURL).concat(u),a="".concat(t,".html"),void o.a.get(e,{responseType:"blob"}).then((function(e){Te()(e.data,a)}));var e,a},children:[Object(D.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]})]}),v&&!k()&&Object(D.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(D.jsx)("i",{className:"fa fa-file","aria-hidden":"true"})," Please upload all required files."]}),"Please provide title"===t&&Object(D.jsxs)("div",{className:"alert alert-warning mb-3",role:"alert",children:[Object(D.jsx)("i",{className:"fa fa-exclamation-triangle","aria-hidden":"true"})," ",Object(D.jsx)("b",{children:"Please add YAML config to your notebook as a first raw cell."}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Example:",Object(D.jsxs)("pre",{children:["---",Object(D.jsx)("br",{}),"title: Report title",Object(D.jsx)("br",{}),"author: Your name",Object(D.jsx)("br",{}),"description: My amazing report",Object(D.jsx)("br",{}),"---"]}),Object(D.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return window.open("https://github.com/mljar/mercury#convert-notebook-to-web-app-with-yaml","_blank")},children:[Object(D.jsx)("i",{className:"fa fa-book","aria-hidden":"true"})," Read more"]})]}),r&&Object(D.jsxs)("div",{className:"alert alert-primary mb-3",role:"alert",children:[Object(D.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Notebook is executed. Please wait."]}),c&&Object(D.jsxs)("div",{className:"alert alert-secondary mb-3",role:"alert",children:[Object(D.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})," Notebook in watch mode. All changes to Notebook will be automatically visible in Mercury."]})]})}),Object(D.jsx)("hr",{style:{marginTop:"50px",marginBottom:"10px"}}),Object(D.jsx)("div",{children:Object(D.jsxs)("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){f(function(e){return function(){var t=Object(d.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=p(),r="/api/v1/clear_tasks/".concat(e,"/").concat(n),t.next=5,o.a.post(r);case 5:a(le({})),b.b.success("All previous tasks deleted. The default view of the app is displayed."),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),b.b.error("Trying to clear previous tasks. The error occured. ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(a)),f(oe(a))},style:{border:"none"},disabled:r,title:"Click to clear all previous runs of the notebook",children:[Object(D.jsx)("i",{className:"fa fa-times-circle","aria-hidden":"true"})," Clear tasks"]})})]})})}Object(Me.registerPlugin)(We.a,_e.a,ze.a);var Ve=a(27);function Ye(e){var t=e.loadingState,a=e.notebookPath,r=e.waiting,i=e.errorMsg,s=e.watchMode,c=e.displayEmbed,l=e.isPro,d=e.username,u=e.slidesHash,b=e.columnsWidth,j=function(){var e=Object(n.useState)(G()),t=Object(I.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(G())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height,p=c?j-10:j-58;return Object(D.jsx)("main",{className:"ms-sm-auto col-lg-".concat(b),style:{paddingTop:"0px",paddingRight:"0px",paddingLeft:"0px"},children:Object(D.jsx)(Ve.a,{tag:"div",blocking:r,children:Object(D.jsxs)("div",{children:["loading"===t&&!s&&Object(D.jsx)("p",{children:"Loading notebook. Please wait ..."}),"error"===t&&!l&&Object(D.jsx)("p",{style:{margin:"20px"},children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),"error"===t&&l&&""===d&&Object(D.jsxs)("p",{style:{margin:"20px"},children:[Object(D.jsx)("h5",{children:"Please log in to see the notebook"}),Object(D.jsxs)("a",{href:"/login",className:"btn btn-primary btn-sm ",children:[Object(D.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),"error"===t&&l&&""!==d&&Object(D.jsx)("p",{style:{margin:"20px"},children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),i&&Object(D.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(D.jsx)("b",{children:"Notebook is executed with errors."}),Object(D.jsx)("p",{children:i})]}),""===i&&"loading"!==t&&Object(D.jsx)("iframe",{width:"100%",height:p,src:"".concat(o.a.defaults.baseURL).concat(a).concat(u),title:"display",id:"main-iframe"},a)]})})})}var Je=function(e){var t=e.notebookId,a=Object(s.b)(),r=Object(s.c)(ae),i=Object(s.c)(re);return Object(n.useEffect)((function(){"WATCH_READY"!==r.state&&"WATCH_WAIT"!==r.state&&"WATCH_ERROR"!==r.state||setTimeout((function(){a(oe(t,!0)),a(ue(t))}),2e3)}),[a,r,t,i]),Object(D.jsx)("div",{})};function qe(e){var t,a=e.files,n=e.filesState,r=e.waiting,i=Object(s.b)(),c=[],l=Object(q.a)(a);try{var d=function(){var e=t.value,a=e.split("/").pop();e&&a&&c.push(Object(D.jsxs)("div",{children:[Object(D.jsx)("i",{className:"fa fa-file-text-o","aria-hidden":"true",style:{paddingRight:"5px"}})," ",Object(D.jsx)("b",{children:a}),Object(D.jsxs)("button",{style:{float:"right"},type:"button",className:"btn btn-primary",onClick:function(){return t="".concat(o.a.defaults.baseURL).concat(e),n=a,void o.a.get(t,{responseType:"blob"}).then((function(e){Te()(e.data,n)}));var t,n},children:[Object(D.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]}),Object(D.jsx)("hr",{})]},e))};for(l.s();!(t=l.n()).done;)d()}catch(u){l.e(u)}finally{l.f()}return Object(D.jsxs)("main",{className:"col-md-9 ms-sm-auto col-lg-9",style:{padding:"20px"},children:[Object(D.jsxs)("div",{className:"col-8",children:[Object(D.jsxs)("h3",{style:{paddingBottom:"10px"},children:[Object(D.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," Files view"]}),Object(D.jsx)(Ve.a,{tag:"div",blocking:r,children:Object(D.jsxs)("div",{children:["loaded"===n&&c,"unknown"===n&&Object(D.jsx)("p",{children:"Please run the notebook to produce output files ..."}),"loading"===n&&Object(D.jsx)("p",{children:"Loading files please wait ..."}),"error"===n&&Object(D.jsx)("div",{className:"alert alert-danger mb-3",role:"alert",children:"There was an error during loading files. Please try to run the app again or contact the administrator."})]})})]}),Object(D.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:function(){i(F("app"))},children:[Object(D.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})," Back to App"]})]})}function Ge(){return Object(D.jsx)("a",{href:"https://mljar.com/mercury",target:"_blank",rel:"noreferrer",children:Object(D.jsx)("div",{className:"poweredby",children:Object(D.jsx)("div",{children:Object(D.jsx)("img",{alt:"Mercury",src:"/example/to/replace/static/mercury_logo.svg",style:{height:"20px"}})})})})}var Qe=function(e){e.isSingleApp;var t,a,r=e.notebookId,i=e.displayEmbed,c=Object(s.b)(),u=Object(s.c)(ae),b=Object(s.c)(ne),j=Object(s.c)(de),f=Object(s.c)(H),h=Object(s.c)(B),m=Object(s.c)(_),v=Object(s.c)(P),x=Object(s.c)(k),g=Object(s.c)(w),O=Object(s.c)(ie),y=Object(s.c)(z),N=function(){return!(!j.state||"CREATED"!==j.state)||!(!j.state||"RECEIVED"!==j.state)},S=function(){return"WATCH_READY"===u.state||"WATCH_WAIT"===u.state||"WATCH_ERROR"===u.state};Object(n.useEffect)((function(){c(oe(r)),c(ue(r))}),[c,r,g]),Object(n.useEffect)((function(){N()&&setTimeout((function(){c(ue(r))}),1e3)}),[c,j,r]),Object(n.useEffect)((function(){var e;"files"===f&&j.id&&j.state&&"DONE"===j.state&&j.result&&c((e=j.id,function(){var t=Object(d.a)(l.a.mark((function t(a){var n,r,i,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(M("loading")),a(L([])),n=p(),r="/api/v1/output_files/".concat(n,"/").concat(e),t.next=7,o.a.get(r);case 7:i=t.sent,s=i.data,a(L(s)),a(M("loaded")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),a(M("error")),console.error("Problem during loading output files. ".concat(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()))}),[c,f,j.id,j.state,j.result]);var C=u.default_view_path;j.state&&"DONE"===j.state&&j.result&&(C=j.result);var T="";return j.state&&j.result&&"ERROR"===j.state&&(T=j.result),Object(D.jsxs)("div",{className:"App",children:[!i&&Object(D.jsx)(Y,{showFiles:function(e){if(e)for(var t=0,a=Object.entries(e);t<a.length;t++){var n=Object(I.a)(a[t],2)[1];if("dir"===n.output)return!0}return!1}(null===u||void 0===u||null===(t=u.params)||void 0===t?void 0:t.params),isPro:v,username:x}),Object(D.jsx)("div",{className:"container-fluid",children:Object(D.jsxs)("div",{className:"row",children:[Object(D.jsx)(Je,{notebookId:r}),y&&Object(D.jsx)(Ue,{notebookTitle:u.title,notebookId:r,loadingState:b,waiting:N(),widgetsParams:null===u||void 0===u||null===(a=u.params)||void 0===a?void 0:a.params,watchMode:S(),notebookPath:C,displayEmbed:i}),!y&&Object(D.jsx)("div",{children:Object(D.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{position:"absolute",top:i?"5px":"50px",left:"5px",zIndex:"100"},onClick:function(){return c(W(!0))},"data-toggle":"tooltip","data-placement":"right",title:"Show sidebar",children:Object(D.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})}),"app"===f&&Object(D.jsx)(Ye,{loadingState:b,notebookPath:C,errorMsg:T,waiting:N(),watchMode:S(),displayEmbed:i,isPro:v,username:x,slidesHash:O,columnsWidth:y?9:12}),"files"===f&&Object(D.jsx)(qe,{files:h,filesState:m,waiting:N()})]})}),i&&Object(D.jsx)(Ge,{})]})};function Xe(){var e=Object(s.b)();return Object(n.useEffect)((function(){p(),e(function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,o.a.get("/api/v1/version/");case 4:a=e.sent,n=a.data,t(T(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during loading Mercury version. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),localStorage.getItem("token")&&e(O(localStorage.getItem("token"))),localStorage.getItem("username")&&e(y(localStorage.getItem("username")))}),[]),Object(D.jsx)(Qe,{isSingleApp:!0,notebookId:1,displayEmbed:!0})}var Ze=function(e){var t=e.store;e.history;return Object(D.jsx)(s.a,{store:t,children:Object(D.jsx)(Xe,{})})},$e=a(59),et=a(57),tt=a(11);var at,nt=Object(et.a)(),rt=Object(tt.b)({notebooks:X,tasks:ce,widgets:pe,version:S,app:A,auth:x}),it=Object($e.a)(Object(u.c)()),ot=(a(109),a(110),a(132),a(133),a(134),a(135),a(136),a(137),Object(u.a)({reducer:rt,middleware:it,preloadedState:at}));"http://localhost:3000"===window.location.origin?o.a.defaults.baseURL="http://127.0.0.1:8000":o.a.defaults.baseURL=window.location.origin,"https://hf.space"===window.location.origin&&(o.a.defaults.baseURL=window.location.href),document.addEventListener("DOMContentLoaded",(function(){return Object(r.render)(Object(D.jsxs)("div",{children:[Object(D.jsx)(Ze,{store:ot,history:nt}),Object(D.jsx)(b.a,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0})]}),document.getElementById("root"))}))},89:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.ab571e85.chunk.js.map