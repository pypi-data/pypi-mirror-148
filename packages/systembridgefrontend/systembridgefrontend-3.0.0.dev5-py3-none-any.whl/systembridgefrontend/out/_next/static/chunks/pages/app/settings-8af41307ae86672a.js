(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{7039:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/settings",function(){return t(8438)}])},8438:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var r=t(5893),i=t(7294),o=t(7948),a=t(2315),c=t(4051),s=t.n(c),l=t(2734),u=t(6886),d=t(8456),p=t(1163),f=t(7262),h=t(9375),g=t(5934),y=t(9875),m=t(796),x=t(9953),v=t(3395),b=t(9653),j=t(4054),Z=t(7709),w=t(7109),S=t(3946),C=t(8514),k=t(8849),P=t(5317);var I={log_level:{name:"Log Level",description:"Log level for the application",icon:P.eLz},port_api:{name:"API Port",description:"Port for the API and WebSocket",icon:P.A0p}};var _=function(e){var n=e.keyIn,t=e.valueIn,o=e.handleChanged,a=function(e){h(e)},c=function(e){a(e.target.value)},s=(0,i.useState)(!1),u=s[0],d=s[1],p=(0,i.useState)(t),f=p[0],h=p[1],_=(0,i.useMemo)((function(){return t!==f}),[t,f]),A=I[n],E=A.name,O=A.description,z=A.icon,T=A.containerDisabled,N=A.isPassword,W=A.minimum,D=(0,l.Z)();return(0,r.jsxs)(y.ZP,{children:[(0,r.jsx)(m.Z,{children:(0,r.jsx)(k.Icon,{id:"icon",title:E,size:1,path:z})}),(0,r.jsx)(x.Z,{style:{maxWidth:"64%"},primary:E,secondary:O,sx:{userSelect:"none"}}),(0,r.jsxs)(v.Z,{sx:{width:420,textAlign:"end"},children:["boolean"===typeof f?(0,r.jsx)(b.Z,{edge:"end",disabled:T,defaultChecked:f,onChange:function(e,n){a(n)}}):"string"===typeof f&&"api_key"===n?(0,r.jsx)(j.Z,{fullWidth:!0,variant:"outlined",children:(0,r.jsx)(Z.Z,{type:"text",disabled:!0,value:f,endAdornment:(0,r.jsxs)(w.Z,{position:"end",children:[(0,r.jsx)(S.Z,{"aria-label":"Generate Api Key",onClick:function(){a((0,g.Z)())},edge:"end",size:"large",sx:{margin:D.spacing(-1,-.5)},children:(0,r.jsx)(k.Icon,{id:"generate-api-key",title:"Generate API Key",size:1,path:P.VmU})}),(0,r.jsx)(S.Z,{"aria-label":"Copy to clipboard",onClick:function(){return function(e){navigator.permissions.query({name:"clipboard-write"}).then((function(n){"granted"!==n.state&&"prompt"!==n.state||navigator.clipboard.writeText(e)}))}(f)},size:"large",sx:{margin:D.spacing(-1,-.5)},children:(0,r.jsx)(k.Icon,{id:"copy-to-clipboard",title:"Copy to clipboard",size:.8,path:P.a0Z})})]})})}):"string"===typeof f&&N?(0,r.jsx)(j.Z,{variant:"outlined",children:(0,r.jsx)(Z.Z,{type:u?"text":"password",defaultValue:f,onChange:c,endAdornment:(0,r.jsx)(w.Z,{position:"end",children:(0,r.jsx)(S.Z,{"aria-label":"Toggle visibility",onClick:function(){d(!u)},onMouseDown:function(e){e.preventDefault()},size:"large",children:(0,r.jsx)(k.Icon,{id:"copy-to-clipboard",title:"Copy to clipboard",size:.8,path:u?P.rgx:P.DqW})})})})}):"string"===typeof f?(0,r.jsx)(C.Z,{type:"text",defaultValue:f,disabled:T,onChange:c,variant:"outlined"}):"number"===typeof f?(0,r.jsx)(C.Z,{error:!!W&&f<W,type:"number",disabled:T,inputProps:{minimum:W},defaultValue:f,onChange:c,variant:"outlined"}):"",(0,r.jsx)(S.Z,{disabled:!1===_,onClick:function(){o(n,f)},sx:{margin:D.spacing(1)},children:(0,r.jsx)(k.Icon,{id:"save",title:"Save",size:1,path:P.JTj,style:{opacity:_?1:.25}})})]})]})},A=t(5861),E=t(5113),O=t(8462);var z,T=function(e){var n=e.name,t=e.description,i=e.children;return(0,r.jsxs)(u.ZP,{container:!0,direction:"row",item:!0,xs:12,children:[(0,r.jsxs)(u.ZP,{item:!0,xs:4,style:{userSelect:"none"},children:[(0,r.jsx)(A.Z,{component:"h3",variant:"h5",children:n}),(0,r.jsx)(A.Z,{variant:"subtitle1",children:t})]}),(0,r.jsx)(u.ZP,{item:!0,xs:8,children:(0,r.jsx)(E.Z,{children:(0,r.jsx)(O.Z,{children:i})})})]})};function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function W(e,n,t,r,i,o,a){try{var c=e[o](a),s=c.value}catch(l){return void t(l)}c.done?n(s):Promise.resolve(s).then(r,i)}function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){c=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(c)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(){var e=G((0,f.r)(),2),n=e[0],t=e[1],o=(0,i.useState)(!1),a=o[0],c=o[1],g=(0,p.useRouter)().query,y=(0,i.useCallback)((function(e){if(console.log("Event:",e),"SETTINGS_RESULT"===e.type){console.log("Settings result:",e.data);var n={};e.data.forEach((function(e){n[e.key]=e.value})),console.log("Settings:",n),t(n)}}),[t]),m=(0,i.useCallback)((function(e,n){var t;console.log("Setup WebSocketConnection"),z=new h.C(e,n,(t=s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.getSettings();case 1:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){W(o,r,i,a,c,"next",e)}function c(e){W(o,r,i,a,c,"throw",e)}a(void 0)}))})),z.onEvent=y}),[y]),x=(0,i.useCallback)((function(e,r){z.updateSetting(e,r),t(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){D(e,n,t[n])}))}return e}({},n,D({},e,r)))}),[n,t]);(0,i.useEffect)((function(){!a&&g&&g.apiKey&&(c(!0),m(Number(g.apiPort)||9170,String(g.apiKey)))}),[a,m,g]);var v=(0,l.Z)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.ZP,{container:!0,direction:"column",spacing:2,alignItems:"stretch",sx:{marginBottom:v.spacing(8),padding:v.spacing(2)},children:n?(0,r.jsx)(T,{name:"General",description:"General settings",children:(0,r.jsx)(r.Fragment,{children:Object.keys(n).map((function(e,t){return(0,r.jsx)(_,{keyIn:e,valueIn:n[e],handleChanged:x},t)}))})}):(0,r.jsx)(u.ZP,{container:!0,direction:"row",justifyContent:"center",sx:{margin:v.spacing(2,0,10)},children:(0,r.jsx)(d.Z,{})})})})};var K=function(){return(0,r.jsx)(a.Z,{title:"Settings",url:"https://system-bridge.timmo.dev",description:"Frontend for System Bridge",children:(0,r.jsx)(o.Z,{component:"article",maxWidth:"xl",children:(0,r.jsx)(L,{})})})}}},function(e){e.O(0,[702,964,524,301,257,807,471,774,888,179],(function(){return n=7039,e(e.s=n);var n}));var n=e.O();_N_E=n}]);