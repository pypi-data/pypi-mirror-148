(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52a5ca7d"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f"),a("00b4");var i=a("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(i["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(i["a"])(t,e):void 0}}},"08c2":function(t,e,a){"use strict";a("9f17")},1148:function(t,e,a){"use strict";var i=a("a691"),n=a("1d80");t.exports="".repeat||function(t){var e=String(n(this)),a="",l=i(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(e+=e))1&l&&(a+=e);return a}},2987:function(t,e,a){},"31c3":function(t,e,a){"use strict";a("8c1b")},3835:function(t,e,a){"use strict";function i(t){if(Array.isArray(t))return t}a.d(e,"a",(function(){return r}));a("e01a"),a("d3b7"),a("d28b"),a("e260"),a("3ca3"),a("ddb0");function n(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,n,l=[],o=!0,r=!1;try{for(a=a.call(t);!(o=(i=a.next()).done);o=!0)if(l.push(i.value),e&&l.length===e)break}catch(s){r=!0,n=s}finally{try{o||null==a["return"]||a["return"]()}finally{if(r)throw n}}return l}}var l=a("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){return i(t)||n(t,e)||Object(l["a"])(t,e)||o()}},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"4de4":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").filter,l=a("1dde"),o=a("ae40"),r=l("filter"),s=o("filter");i({target:"Array",proto:!0,forced:!r||!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,a){"use strict";var i=a("0366"),n=a("7b0b"),l=a("9bdd"),o=a("e95a"),r=a("50c4"),s=a("8418"),c=a("35a1");t.exports=function(t){var e,a,p,u,f,b,h=n(t),d="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,v=void 0!==m,k=c(h),C=0;if(v&&(m=i(m,g>2?arguments[2]:void 0,2)),void 0==k||d==Array&&o(k))for(e=r(h.length),a=new d(e);e>C;C++)b=v?m(h[C],C):h[C],s(a,C,b);else for(u=k.call(h),f=u.next,a=new d;!(p=f.call(u)).done;C++)b=v?l(u,m,[p.value,C],!0):p.value,s(a,C,b);return a.length=C,a}},"5e89":function(t,e,a){var i=a("861d"),n=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&n(t)===t}},"60da":function(t,e,a){"use strict";var i=a("83ab"),n=a("d039"),l=a("df75"),o=a("7418"),r=a("d1e7"),s=a("7b0b"),c=a("44ad"),p=Object.assign,u=Object.defineProperty;t.exports=!p||n((function(){if(i&&1!==p({b:1},p(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach((function(t){e[t]=t})),7!=p({},t)[a]||l(p({},e)).join("")!=n}))?function(t,e){var a=s(t),n=arguments.length,p=1,u=o.f,f=r.f;while(n>p){var b,h=c(arguments[p++]),d=u?l(h).concat(u(h)):l(h),g=d.length,m=0;while(g>m)b=d[m++],i&&!f.call(h,b)||(a[b]=h[b])}return a}:p},"6b75":function(t,e,a){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}a.d(e,"a",(function(){return i}))},"7f76":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cl-comm"},[a("div",{staticClass:"profiling-content-title"},[t._v(" "+t._s(t.$t("profilingCluster.clusterCommView"))+" "),a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{staticClass:"comm-tooltip-container",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"comm-tooltip-cell"},[a("span",[t._v(t._s(t.$t("profilingCluster.commCost")+t.$t("symbols.colon")))]),a("br"),a("span",[t._v(t._s(t.$t("profilingCluster.commCostExplanation")))])]),a("div",{staticClass:"comm-tooltip-cell"},[a("span",[t._v(t._s(t.$t("profilingCluster.waitCost")+t.$t("symbols.colon")))]),a("br"),a("span",[t._v(t._s(t.$t("profilingCluster.waitCostExplanation")))])]),a("div",{staticClass:"comm-tooltip-cell"},[a("span",[t._v(t._s(t.$t("profilingCluster.linkInfo")+t.$t("symbols.colon")))]),a("br"),a("span",[t._v(t._s(t.$t("profilingCluster.linkInfoExplanation")))])]),a("div",{staticClass:"comm-tooltip-cell"},[a("span",[t._v(t._s(t.$t("profilingCluster.linkType")+t.$t("symbols.colon")))]),a("br"),a("span",[t._v(t._s(t.$t("profilingCluster.linkTypeExplanation")))])])]),a("i",{staticClass:"el-icon-info comm-tip"})])],1),a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("el-tab-pane",{attrs:{label:t.$t("profilingCluster.commPerformance"),name:t.tabNames[0]}}),a("el-tab-pane",{attrs:{label:t.$t("profilingCluster.linkInfo"),name:t.tabNames[1]}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pageState===t.normalState&&t.tab===t.tabNames[0],expression:"pageState === normalState && tab === tabNames[0]"}],staticClass:"comm-content default-tab"},[a("div",{staticClass:"content-filter"},[a("label",[t._v(t._s(t.stepTip))]),a("el-input",{staticClass:"step-input",attrs:{clearable:""},on:{clear:t.stepFilter},model:{value:t.step.value,callback:function(e){t.$set(t.step,"value",e)},expression:"step.value"}}),a("el-button",{on:{click:t.stepFilter}},[t._v(t._s(t.$t("public.sure")))])],1),a("div",{ref:"commChart",staticClass:"content-chart"}),a("div",{staticClass:"content-table"},[a("el-table",{ref:"table",attrs:{data:t.tableData,height:"100%",stripe:""},on:{"sort-change":t.tableSortChange}},[a("el-table-column",{attrs:{width:"120",prop:t.tableProps[0].prop,label:t.tableProps[0].label}}),a("el-table-column",{attrs:{prop:t.tableProps[1].prop,label:t.tableProps[1].label,sortable:"custom"}}),a("el-table-column",{attrs:{prop:t.tableProps[2].prop,label:t.tableProps[2].label,sortable:"custom"}}),a("el-table-column",{attrs:{fixed:"right",width:"180",label:t.tableProps[3].label},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-button",on:{click:function(a){return t.showOpInfo(e.row)}}},[t._v(" "+t._s(t.$t("public.details"))+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",width:"180",label:t.tableProps[4].label},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-button",on:{click:function(a){return t.showLinkInfo(e.row)}}},[t._v(" "+t._s(t.$t("public.details"))+" ")])]}}])})],1)],1),a("div",{staticClass:"content-pagination"},[a("el-pagination",{attrs:{"page-sizes":t.pageCondition.sizes,"page-size":t.pageCondition.limit,"current-page":t.pageCondition.page,layout:"total,sizes,prev,pager,next,jumper",total:t.pageCondition.total},on:{"current-change":t.currentPageChange,"size-change":t.pageSizeChange}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pageState===t.normalState&&t.tab===t.tabNames[1],expression:"pageState === normalState && tab === tabNames[1]"}],staticClass:"comm-content link-tab"},[a("div",{staticClass:"content-filter"},[a("span",[t._v(t._s(t.$t("profilingCluster.startID")))]),a("el-input",{attrs:{clearable:""},on:{clear:t.filterLinkTable},model:{value:t.linkTable.filter.src_rank,callback:function(e){t.$set(t.linkTable.filter,"src_rank",e)},expression:"linkTable.filter.src_rank"}}),a("span",[t._v(t._s(t.$t("profilingCluster.endID")))]),a("el-input",{attrs:{clearable:""},on:{clear:t.filterLinkTable},model:{value:t.linkTable.filter.dst_rank,callback:function(e){t.$set(t.linkTable.filter,"dst_rank",e)},expression:"linkTable.filter.dst_rank"}}),a("span",[t._v(t._s(t.$t("profilingCluster.linkType")))]),a("el-select",{model:{value:t.linkTable.filter.link_type,callback:function(e){t.$set(t.linkTable.filter,"link_type",e)},expression:"linkTable.filter.link_type"}},t._l(t.linkTable.linkTypes,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1),a("el-button",{on:{click:t.filterLinkTable}},[t._v(t._s(t.$t("public.sure"))+" ")])],1),a("div",{staticClass:"content-link-table"},[a("el-table",{ref:"table",attrs:{data:t.linkTable.tableData,height:"100%",stripe:""},on:{"sort-change":t.linkTableSortChange}},[a("el-table-column",{attrs:{prop:t.linkTableProps[0].prop,label:t.linkTableProps[0].label}}),a("el-table-column",{attrs:{sortable:"custom",prop:t.linkTableProps[1].prop,label:t.linkTableProps[1].label}}),a("el-table-column",{attrs:{sortable:"custom",prop:t.linkTableProps[2].prop,label:t.linkTableProps[2].label}}),a("el-table-column",{attrs:{sortable:"custom",prop:t.linkTableProps[3].prop,label:t.linkTableProps[3].label}}),a("el-table-column",{attrs:{prop:t.linkTableProps[4].prop,label:t.linkTableProps[4].label}})],1)],1),a("div",{staticClass:"content-pagination"},[a("el-pagination",{attrs:{"page-sizes":t.linkTable.pageCondition.sizes,"page-size":t.linkTable.pageCondition.limit,"current-page":t.linkTable.pageCondition.page,layout:"total,sizes,prev,pager,next,jumper",total:t.linkTable.pageCondition.total},on:{"current-change":t.linkTablePageChange,"size-change":t.linkTableSizeChange,"update:currentPage":function(e){return t.$set(t.linkTable.pageCondition,"page",e)},"update:current-page":function(e){return t.$set(t.linkTable.pageCondition,"page",e)}}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pageState!==t.normalState,expression:"pageState !== normalState"}],staticClass:"comm-content"},[a("empty",{attrs:{state:t.pageState}})],1),a("el-dialog",{attrs:{title:t.linkInfo.title,visible:t.linkInfo.visible,width:"960px"},on:{"update:visible":function(e){return t.$set(t.linkInfo,"visible",e)}}},[a("div",{staticClass:"comm-dialog"},[a("div",{staticClass:"dialog-filter"},[a("span",[t._v(t._s(t.$t("profilingCluster.linkType")))]),a("el-select",{on:{change:t.filterLinkInfo},model:{value:t.linkInfo.filterType,callback:function(e){t.$set(t.linkInfo,"filterType",e)},expression:"linkInfo.filterType"}},t._l(t.linkInfo.linkTypes,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("div",{staticClass:"dialog-content",style:{height:t.linkInfo.tableHeight}},[a("el-table",{attrs:{data:t.linkInfo.tableData,height:"100%"}},[a("el-table-column",{attrs:{width:"160",prop:t.linkTableProps[0].prop,label:t.linkTableProps[0].label}}),a("el-table-column",{attrs:{sortable:"",prop:t.linkTableProps[1].prop,label:t.linkTableProps[1].label}}),a("el-table-column",{attrs:{sortable:"",prop:t.linkTableProps[2].prop,label:t.linkTableProps[2].label}}),a("el-table-column",{attrs:{sortable:"",prop:t.linkTableProps[3].prop,label:t.linkTableProps[3].label}}),a("el-table-column",{attrs:{width:"100",prop:t.linkTableProps[4].prop,label:t.linkTableProps[4].label}})],1)],1)])]),a("el-dialog",{attrs:{title:t.opInfo.title,visible:t.opInfo.visible,width:"960px"},on:{"update:visible":function(e){return t.$set(t.opInfo,"visible",e)}}},[t.opInfo.visible?a("cluster-comm-op-details",{attrs:{rankID:t.opInfo.rankID,dataset:t.opInfo.dataset}}):t._e()],1)],1)},n=[],l=(a("99af"),a("b0c0"),a("e9c4"),a("4de4"),a("d3b7"),a("159b"),a("b64b"),a("ac16"),a("caad"),a("2532"),a("fb6a"),a("25f0"),a("ac1f"),a("5319"),a("cca6"),a("9fac")),o=a("3778"),r=a("d138"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cluster-comm-op-details-modal"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"content-header"},[a("el-input",{attrs:{placeholder:t.$t("operator.searchByName")},on:{change:t.filterOperator,clear:t.filterOperator},model:{value:t.searchOperatorStr,callback:function(e){t.searchOperatorStr=e},expression:"searchOperatorStr"}})],1),a("div",{staticClass:"content-container"},[a("el-table",{ref:"table",attrs:{data:t.displayOperatorDataset,height:"100%"},on:{"expand-change":t.onExpandTable}},[a("el-table-column",{attrs:{type:"expand"}},[[a("el-table",{attrs:{data:t.displayLinkDataset,height:"100%"}},[a("el-table-column",{attrs:{label:t.linkRel.label,prop:t.linkRel.prop,width:"130"}}),a("el-table-column",{attrs:{label:t.commDur.label,prop:t.commDur.prop,sortable:""}}),a("el-table-column",{attrs:{label:t.commSize.label,prop:t.commSize.prop,width:"190",sortable:""}}),a("el-table-column",{attrs:{label:t.bandwidth.label,prop:t.bandwidth.prop,width:"190",sortable:""}}),a("el-table-column",{attrs:{label:t.linkType.label,prop:t.linkType.prop,width:"90"}})],1)]],2),a("el-table-column",{attrs:{label:t.opName.label,prop:t.opName.prop}}),a("el-table-column",{attrs:{label:t.commDur.label,prop:t.commDur.prop,sortable:!0}}),a("el-table-column",{attrs:{label:t.waitDur.label,prop:t.waitDur.prop,sortable:!0}})],1)],1),a("div",{staticClass:"content-pagination"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.currentPage,"page-sizes":t.pageInfo.pageSizes,"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.onPageSizeChange,"current-change":t.onCurrentPageChange}})],1)])])},c=[],p=(a("a9e3"),a("9944")),u="(ms)",f="(KB)",b="(KB/s)",h=20,d=4,g={props:{rankID:Number,dataset:Object},data:function(){return{opName:{label:this.$t("profilingCluster.opName"),prop:"opName"},commDur:{label:this.$t("profilingCluster.commCost")+u,prop:"commDur"},commSize:{label:this.$t("profilingCluster.commSize")+f,prop:"commSize"},waitDur:{label:this.$t("profilingCluster.waitCost")+u,prop:"waitDur"},bandwidth:{label:this.$t("profilingCluster.bandWidth")+b,prop:"bandwidth"},linkRel:{label:this.$t("profilingCluster.linkRange"),prop:"linkRel"},linkType:{label:this.$t("profilingCluster.linkType"),prop:"linkType"},totalOperatorDataset:[],filterOperatorDataset:[],displayOperatorDataset:[],displayLinkDataset:[],pageInfo:{currentPage:null,total:null,pageSize:null,pageSizes:[10,20,50]},searchOperatorStr:"",expandedRow:null}},created:function(){this.initOperatorTable()},methods:{initOperatorTable:function(){var t=this;if(!this.dataset){var e=this.pageInfo;return e.currentPage=1,e.total=0,void(e.pageSize=h)}var a=[];Object.keys(this.dataset).forEach((function(e){var i=t.dataset[e];a.push({opName:e,commDur:Object(p["c"])(i[1],d),waitDur:Object(p["c"])(i[2],d),linkInfo:i[3]})})),this.searchOperatorStr="",this.totalOperatorDataset=a,this.filterOperatorDataset=a,this.pageInfo.total=this.filterOperatorDataset.length,this.onPageSizeChange(h)},initExpandTable:function(t){var e=[];Object.keys(t).forEach((function(a){var i=t[a];Object.keys(i).forEach((function(t){var n=i[t];e.push({linkRel:a,commDur:Object(p["c"])(n[0],d),commSize:Object(p["c"])(n[1],d),bandwidth:Object(p["c"])(n[2],d),linkType:t})}))})),this.displayLinkDataset=e},onExpandTable:function(t){t!==this.expandedRow&&(this.$refs.table.toggleRowExpansion(this.expandedRow,!1),this.expandedRow=t,this.initExpandTable(t.linkInfo))},onPageSizeChange:function(t){this.pageInfo.pageSize=t,this.pageInfo.currentPage=1,this.displayOperatorDataset=this.filterOperatorDataset.slice(0,t)},onCurrentPageChange:function(t){this.pageInfo.currentPage=t;var e=this.pageInfo.pageSize;this.displayOperatorDataset=this.filterOperatorDataset.slice((t-1)*e,t*e)},filterOperator:function(t){this.filterOperatorDataset=this.totalOperatorDataset.filter((function(e){return e.opName.includes(t)})),this.pageInfo.total=this.filterOperatorDataset.length,this.onCurrentPageChange(1)}},watch:{rankID:function(){var t=this;setTimeout((function(){t.initOperatorTable()}),0)}}},m=g,v=(a("08c2"),a("2877")),k=Object(v["a"])(m,s,c,!1,null,null,null),C=k.exports,y="(ms)",T="(KB)",I="(KB/s)",_=4,$={components:{empty:r["d"],clusterCommOpDetails:C},data:function(){return{pageState:r["b"],normalState:"normal",tabNames:["chart","table"],tab:null,trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},activeName:this.$route.query.activeName,chartInstance:null,chartResizeTimer:null,tableData:[],tableProps:[{label:this.$t("profilingCluster.rankID"),prop:"rank_id"},{label:this.$t("profilingCluster.commCost")+y,prop:"communication_cost"},{label:this.$t("profilingCluster.waitCost")+y,prop:"wait_cost"},{label:this.$t("profiling.operatorDetail")},{label:this.$t("profilingCluster.linkInfo")}],pageCondition:{page:1,limit:10,sizes:[10,20,50],total:0},sortCondition:{},step:{min:1,max:null,value:"",last:null},stepTip:this.$t("profiling.stepInputTip"),linkInfo:{title:this.$t("profilingCluster.linkInfo"),visible:!1,filterType:this.$t("public.all"),linkTypes:[this.$t("public.all")],tableData:[],totalData:[],tableHeight:"0px"},linkTableProps:[{label:this.$t("profilingCluster.linkRange"),prop:"src_dst"},{label:this.$t("profilingCluster.commCost")+y,prop:"communication_cost"},{label:this.$t("profilingCluster.commSize")+T,prop:"communication_size"},{label:this.$t("profilingCluster.bandWidth")+I,prop:"band_width"},{label:this.$t("profilingCluster.linkType"),prop:"link_type"}],linkTable:{tableData:[],sortCondition:{},filter:{step_id:"",src_rank:"",dst_rank:"",link_type:this.$t("public.all")},params:null,linkTypes:[],pageCondition:{page:1,limit:20,sizes:[10,20,50],total:0}},opInfo:{title:this.$t("profiling.operatorDetail"),visible:!1,dataID:null,dataset:[]}}},created:function(){this.tab=this.tabNames[0]},mounted:function(){if(!this.trainInfo.id)return this.$message.error(this.$t("trainingDashboard.invalidId")),document.title="".concat(this.$t("profilingCluster.commChartTitle"),"-MindInsight"),void(this.pageState=r["c"]);document.title="".concat(this.trainInfo.path,"-").concat(this.$t("profilingCluster.commChartTitle"),"-MindInsight"),window.addEventListener("resize",this.resizeCallback),this.$bus.$on("collapse",this.resizeCallback),this.initPage(),this.initLinkTable()},beforeDestroy:function(){window.removeEventListener("resize",this.resizeCallback),this.$bus.$off("collapse",this.resizeCallback),this.chartResizeTimer&&(clearTimeout(this.chartResizeTimer),this.chartResizeTimer=null)},methods:{handleTabClick:function(t){var e=this;this.tabNames[0]===t.name&&this.$nextTick((function(){e.chartInstance&&e.chartInstance.resize()}))},filterLinkTable:function(){this.linkTable.pageCondition.page=1;var t=this.useLinkParams();this.useLinkTable(t)},initLinkTable:function(){var t=this.useLinkParams(!0);this.useLinkTable(t)},linkTablePageChange:function(t){var e=this.linkTable.params;e.body.group_condition.offset=t-1,this.useLinkTable(e)},linkTableSizeChange:function(t){var e=this.linkTable.params;this.linkTable.pageCondition.page=1,e.body.group_condition.offset=0,e.body.group_condition.limit=this.linkTable.pageCondition.limit=t,this.useLinkTable(e)},linkTableSortChange:function(t){this.linkTable.pageCondition.page=1,this.linkTable.sortCondition={name:t.prop,type:t.order};var e=this.useLinkParams();this.useLinkTable(e)},useLinkParams:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a={params:{train_id:this.trainInfo.id},body:{group_condition:{offset:this.linkTable.pageCondition.page-1,limit:this.linkTable.pageCondition.limit}}};if(this.linkTable.sortCondition.type&&(a.body.sort_condition=this.linkTable.sortCondition),e)return a;var i=JSON.parse(JSON.stringify(this.linkTable.filter));return Object.keys(i).forEach((function(e){("link_type"!==e||i[e]!==t.$t("public.all"))&&i[e].length||Reflect.deleteProperty(i,e)})),Object.keys(i).length&&(a.body.filter_condition=i),a},useLinkTable:function(t){var e=this;o["a"].getLinkInfo(t).then((function(a){var i;if(e.linkTable.params=t,(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.cluster_link_info.length)>0){e.linkTable.pageCondition.total=a.data.size;var n=[],l=[e.$t("public.all")];a.data.cluster_link_info.forEach((function(t){e.linkTable.linkTypes.length||l.includes(t[1])||l.push(t[1]),n.push({src_dst:t[0],link_type:t[1],communication_cost:Object(p["c"])(t[2],_),communication_size:Object(p["c"])(t[3],_),band_width:Object(p["c"])(t[4],_)})})),e.linkTable.linkTypes.length||(e.linkTable.linkTypes=l),e.linkTable.tableData=n}else e.linkTable.pageCondition.total=0,e.linkTable.tableData=[]}))},initPage:function(){var t=this;this.pageCondition.page=1;var e=this.useParams(!0);this.queryCommInfo(e).then((function(e){e&&t.usePage(e)}))},queryCommInfo:function(t){var e=this;return new Promise((function(a){o["a"].getCommInfo(t).then((function(t){var i;(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.communication.length)>0?a(t.data):(e.pageState=r["c"],a(!1))})).catch((function(){e.pageState=r["c"],a(!1)}))}))},usePage:function(t){this.step.max=t.total_step_num,this.stepTip=this.$t("profiling.stepInputTip",{max:this.step.max}),this.pageCondition.total=t.size,this.useChart(t.communication),this.useTable(t.communication),this.pageState=this.normalState},useParams:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={params:{train_id:this.trainInfo.id},body:{}};return this.sortCondition.type&&(e.body.sort_condition=this.sortCondition),t||(e.body.group_condition={offset:this.pageCondition.page-1,limit:this.pageCondition.limit}),""!==this.step.value&&(e.body.filter_condition={step_id:this.step.value}),e},useChart:function(t){var e=this,a=[];t.forEach((function(t){a.push([t.rank_id,Object(p["c"])(t.communication_info[0],_),Object(p["c"])(t.communication_info[1],_)])}));var i=this.getEChartsOptions(a);this.$nextTick((function(){e.chartInstance||(e.chartInstance=l["a"].init(e.$refs.commChart,l["b"])),e.chartInstance.setOption(i,!0)}))},useTable:function(t){var e=t.length>this.pageCondition.limit?t.slice(0,this.pageCondition.limit):t,a=[];e.forEach((function(t){var e=t.communication_info;a.push({rank_id:t.rank_id,communication_cost:Object(p["c"])(e[0],_),wait_cost:Object(p["c"])(e[1],_),info:e[2],op_info:e[3]})})),this.tableData=a},resizeCallback:function(){var t=this;this.chartResizeTimer&&clearTimeout(this.chartResizeTimer),this.chartResizeTimer=setTimeout((function(){t.chartInstance&&t.chartInstance.resize(),t.chartResizeTimer=null}),200)},showOpInfo:function(t){this.opInfo.dataset=t.op_info,this.opInfo.rankID=t.rank_id,this.opInfo.visible=!0},showLinkInfo:function(t){var e=[],a=[this.$t("public.all")];Object.keys(t.info).forEach((function(i){Object.keys(t.info[i]).forEach((function(n){a.includes(n)||a.push(n);var l=t.info[i][n];e.push({src_dst:i,communication_cost:Object(p["c"])(l[0],_),communication_size:Object(p["c"])(l[1],_),band_width:Object(p["c"])(l[2],_),link_type:n})}))})),this.linkInfo.linkTypes=a,this.linkInfo.totalData=e,this.linkInfo.filterType=a[0],this.filterLinkInfo(),this.linkInfo.visible=!0},filterLinkInfo:function(){var t=this;this.linkInfo.filterType===this.$t("public.all")?this.linkInfo.tableData=this.linkInfo.totalData:this.linkInfo.tableData=this.linkInfo.totalData.filter((function(e){return e.link_type===t.linkInfo.filterType}));var e=42*(this.linkInfo.tableData.length+1);this.linkInfo.tableHeight="".concat(e>600?600:e,"px")},currentPageChange:function(t){var e=this;this.pageCondition.page=t;var a=this.useParams();this.queryCommInfo(a).then((function(t){e.useTable(t.communication)}))},pageSizeChange:function(t){var e=this;this.pageCondition.page=1,this.pageCondition.limit=t;var a=this.useParams();this.queryCommInfo(a).then((function(t){e.useTable(t.communication)}))},tableSortChange:function(t){var e=this;this.sortCondition={name:t.prop,type:t.order},this.pageCondition.page=1;var a=this.useParams(!0);this.queryCommInfo(a).then((function(t){e.useChart(t.communication),e.useTable(t.communication)}))},stepFilter:function(){if(this.step.last!==this.step.value){var t=this.step.value;if(""===t)return this.initPage(),void(this.step.last=t);var e=parseInt(t);if(e.toString()===t&&this.step.min<=e&&e<=this.step.max)return this.initPage(),void(this.step.last=t);this.step.value=this.step.last,this.$message.error(this.$t("profiling.inputError").replace("{max}",this.step.max))}},getEChartsOptions:function(t){var e=t.length>25?25:t.length;return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{right:70,top:8,data:[this.$t("profilingCluster.commCost"),this.$t("profilingCluster.waitCost")]},grid:{top:35,left:80,right:80},dataset:{source:[[this.$t("profilingCluster.rankID"),this.$t("profilingCluster.commCost"),this.$t("profilingCluster.waitCost")]].concat(t)},xAxis:{name:this.$t("profilingCluster.rankID"),nameTextStyle:{align:"left",padding:[0,5]},type:"category"},yAxis:{name:this.$t("profilingCluster.timeTitle"),nameGap:20,nameTextStyle:{align:"right",padding:[0,5]},splitLine:{lineStyle:{type:"dashed"}}},series:[{type:"bar",barWidth:8},{type:"bar",barWidth:8}],dataZoom:[{startValue:0,endValue:e},{startValue:0,endValue:e,type:"inside"}]}},backToDashboard:function(){this.$router.push({path:"cluster-dashboard",query:Object.assign({activeName:this.activeName},this.trainInfo)})}}},w=$,S=(a("90c7"),a("31c3"),Object(v["a"])(w,i,n,!1,null,"14793cd8",null));e["default"]=S.exports},"8ba4":function(t,e,a){var i=a("23e7"),n=a("5e89");i({target:"Number",stat:!0},{isInteger:n})},"8c1b":function(t,e,a){},"90c7":function(t,e,a){"use strict";a("f7ae")},9485:function(t,e,a){t.exports=a.p+"static/img/nodata.8290bed9.png"},9792:function(t,e,a){"use strict";a("2987")},9944:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return r}));var i=a("3835");a("caad"),a("2532"),a("ac1f"),a("466d"),a("99af"),a("d3b7"),a("25f0"),a("b680"),a("8ba4"),a("a9e3");function n(t,e,a){t.toLowerCase().includes("rgb")||(t=l(t)),e.toLowerCase().includes("rgb")||(e=l(e));for(var n=t.match(/[0-9]\d*/g),o=Object(i["a"])(n,3),r=o[0],s=o[1],c=o[2],p=e.match(/[0-9]\d*/g),u=Object(i["a"])(p,3),f=u[0],b=u[1],h=u[2],d=(+f-+r)/a,g=(+b-+s)/a,m=(+h-+c)/a,v=[t],k=1;k<a;k++){var C=parseInt(d*k+ +r),y=parseInt(g*k+ +s),T=parseInt(m*k+ +c);v.push("rgb(".concat(C,",").concat(y,",").concat(T,")"))}return v}function l(t){var e=16;return 4===t.length?"rgb(".concat(parseInt(t[1]+t[1],e),", ").concat(parseInt(t[2]+t[2],e),", ").concat(parseInt(t[3]+t[3],e),")"):"rgb(".concat(parseInt(t[1]+t[2],e),", ").concat(parseInt(t[3]+t[4],e),", ").concat(parseInt(t[5]+t[6],e),")")}function o(t,e){if("number"!==typeof t&&(t=parseFloat(t)),isNaN(t))return"NaN";var a=t+"",i=a.indexOf(".");return i<0||a.length-i-1<=e?a:t.toFixed(e)}function r(t){if(Number.isInteger(t))return!0;if("string"!==typeof t)return!1;var e=+t;return e+""===t&&Number.isInteger(e)}},"9f17":function(t,e,a){},a630:function(t,e,a){var i=a("23e7"),n=a("4df4"),l=a("1c7e"),o=!l((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:n})},ac16:function(t,e,a){var i=a("23e7"),n=a("825a"),l=a("06cf").f;i({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var a=l(n(t),e);return!(a&&!a.configurable)&&delete t[e]}})},b0c0:function(t,e,a){var i=a("83ab"),n=a("9bf2").f,l=Function.prototype,o=l.toString,r=/^\s*function ([^ (]*)/,s="name";i&&!(s in l)&&n(l,s,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},b680:function(t,e,a){"use strict";var i=a("23e7"),n=a("a691"),l=a("408a"),o=a("1148"),r=a("d039"),s=1..toFixed,c=Math.floor,p=function(t,e,a){return 0===e?a:e%2===1?p(t,e-1,a*t):p(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},f=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){s.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,i,r,s=l(this),f=n(t),b=[0,0,0,0,0,0],h="",d="0",g=function(t,e){var a=-1,i=e;while(++a<6)i+=t*b[a],b[a]=i%1e7,i=c(i/1e7)},m=function(t){var e=6,a=0;while(--e>=0)a+=b[e],b[e]=c(a/t),a=a%t*1e7},v=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==b[t]){var a=String(b[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(h="-",s=-s),s>1e-21)if(e=u(s*p(2,69,1))-69,a=e<0?s*p(2,-e,1):s/p(2,e,1),a*=4503599627370496,e=52-e,e>0){g(0,a),i=f;while(i>=7)g(1e7,0),i-=7;g(p(10,i,1),0),i=e-1;while(i>=23)m(1<<23),i-=23;m(1<<i),g(1,1),m(2),d=v()}else g(0,a),g(1<<-e,0),d=v()+o.call("0",f);return f>0?(r=d.length,d=h+(r<=f?"0."+o.call("0",f-r)+d:d.slice(0,r-f)+"."+d.slice(r-f))):d=h+d,d}})},cca6:function(t,e,a){var i=a("23e7"),n=a("60da");i({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},d138:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty-container"},[i("img",{attrs:{src:a("9485")}}),i("span",[t._v(t._s(t.text))])])},n=[],l="noData",o="dataLoading",r="heterogeneous",s={props:{state:{type:String,default:o}},data:function(){return{noData:this.$t("public.noData"),emptyData:this.$t("public.emptyData"),dataLoading:this.$t("public.dataLoading"),stayTuned:this.$t("public.stayTuned"),heterogeneous:this.$t("profiling.isHeterogeneous"),dataSelectTip:this.$t("lossAnalysis.dataSelectTip")}},computed:{text:function(){return this[this.state]?this[this.state]:""}}},c=s,p=(a("9792"),a("2877")),u=Object(p["a"])(c,i,n,!1,null,"fc3dc28a",null);e["d"]=u.exports},d28b:function(t,e,a){var i=a("746f");i("iterator")},e01a:function(t,e,a){"use strict";var i=a("23e7"),n=a("83ab"),l=a("da84"),o=a("5135"),r=a("861d"),s=a("9bf2").f,c=a("e893"),p=l.Symbol;if(n&&"function"==typeof p&&(!("description"in p.prototype)||void 0!==p().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new p(t):void 0===t?p():p(t);return""===t&&(u[e]=!0),e};c(f,p);var b=f.prototype=p.prototype;b.constructor=f;var h=b.toString,d="Symbol(test)"==String(p("test")),g=/^Symbol\((.*)\)[^)]+$/;s(b,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=h.call(t);if(o(u,t))return"";var a=d?e.slice(7,-1):e.replace(g,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:f})}},e9c4:function(t,e,a){var i=a("23e7"),n=a("d066"),l=a("d039"),o=n("JSON","stringify"),r=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,p=function(t,e,a){var i=a.charAt(e-1),n=a.charAt(e+1);return s.test(t)&&!c.test(n)||c.test(t)&&!s.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},u=l((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&i({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,a){var i=o.apply(null,arguments);return"string"==typeof i?i.replace(r,p):i}})},f7ae:function(t,e,a){},fb6a:function(t,e,a){"use strict";var i=a("23e7"),n=a("861d"),l=a("e8b5"),o=a("23cb"),r=a("50c4"),s=a("fc6a"),c=a("8418"),p=a("b622"),u=a("1dde"),f=a("ae40"),b=u("slice"),h=f("slice",{ACCESSORS:!0,0:0,1:2}),d=p("species"),g=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!b||!h},{slice:function(t,e){var a,i,p,u=s(this),f=r(u.length),b=o(t,f),h=o(void 0===e?f:e,f);if(l(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!l(a.prototype)?n(a)&&(a=a[d],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(u,b,h);for(i=new(void 0===a?Array:a)(m(h-b,0)),p=0;b<h;b++,p++)b in u&&c(i,p,u[b]);return i.length=p,i}})}}]);