var Ye=Object.defineProperty,Je=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Ie=(l,e,t)=>e in l?Ye(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Se=(l,e)=>{for(var t in e||(e={}))Ke.call(e,t)&&Ie(l,t,e[t]);if(we)for(var t of we(e))Qe.call(e,t)&&Ie(l,t,e[t]);return l},Ce=(l,e)=>Je(l,Ge(e));import{S as N,i as X,s as Y,e as S,F as U,a as b,b as k,n as j,h as y,z as J,T as _e,B as H,R as O,l as L,r as Fe,k as B,a3 as Ve,f as M,a6 as Ze,m as $e,C as xe,o as T,q as z,u as p,v,w as D,t as ee,x as ne,y as le,j as he,H as Ae,E as Le,d as $,g as ue,I as et,X as tt,D as ce}from"./index.3c784113.js";import{B as Oe,U as nt}from"./BlockLabel.70e6bfff.js";import{C as lt,i as it,I as at,W as st}from"./Image.svelte_svelte_type_style_lang.47cf31b6.js";import{I as Me,M as rt}from"./ModifyUpload.174395aa.js";import{B as ot}from"./Block.1239058b.js";import{S as ut}from"./StatusTracker.eec9373b.js";import{E as un}from"./Image.5da60e4b.js";import"./_commonjsHelpers.80d8c10d.js";var te="./assets/image.45facf29.svg",Ee="./assets/edit.8ee16a39.svg";function ct(l){let e,t;return{c(){e=S("img"),U(e.src,t=l[0])||b(e,"src",t),b(e,"alt","")},m(n,i){k(n,e,i),l[2](e)},p(n,[i]){i&1&&!U(e.src,t=n[0])&&b(e,"src",t)},i:j,o:j,d(n){n&&y(e),l[2](null)}}}function ft(l,e,t){let{image:n}=e,i;const o=J();_e(()=>{const s=new lt(i,{autoCropArea:1,cropend(){const r=s.getCroppedCanvas().toDataURL();o("crop",r)}});return o("crop",n),()=>{s.destroy()}});function a(s){H[s?"unshift":"push"](()=>{i=s,t(1,i)})}return l.$$set=s=>{"image"in s&&t(0,n=s.image)},[n,i,a]}class dt extends N{constructor(e){super(),X(this,e,ft,ct,Y,{image:0})}}class Te{constructor(e,t){this.x=e,this.y=t}}class ze extends Te{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new Te(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const _t=30;class ht{constructor({radius:e=_t,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new ze(n.x,n.y),this.brush=new ze(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function De(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function Re(l){let e;return{c(){e=S("div"),e.textContent="Start drawing",b(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function je(l){let e,t,n=l[40],i,o;const a=()=>l[14](e,n),s=()=>l[14](null,n);return{c(){e=S("canvas"),b(e,"key",t=l[40]),O(e,"display","block"),O(e,"position","absolute"),O(e,"z-index",l[41]),O(e,"width",l[0]+"px"),O(e,"height",l[1]+"px")},m(r,c){k(r,e,c),a(),i||(o=[L(e,"mousedown",l[40]==="interface"?l[6]:void 0),L(e,"mousemove",l[40]==="interface"?l[7]:void 0),L(e,"mouseup",l[40]==="interface"?l[8]:void 0),L(e,"mouseout",l[40]==="interface"?l[8]:void 0),L(e,"touchstart",l[40]==="interface"?l[6]:void 0),L(e,"touchmove",l[40]==="interface"?l[7]:void 0),L(e,"touchend",l[40]==="interface"?l[8]:void 0),L(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(r,c){l=r,c[0]&1&&O(e,"width",l[0]+"px"),c[0]&2&&O(e,"height",l[1]+"px"),n!==l[40]&&(s(),n=l[40],a())},d(r){r&&y(e),s(),i=!1,Fe(o)}}}function gt(l){let e,t,n,i=!l[3]&&Re(),o=l[5],a=[];for(let s=0;s<o.length;s+=1)a[s]=je(De(l,o,s));return{c(){e=S("div"),i&&i.c(),t=B();for(let s=0;s<a.length;s+=1)a[s].c();b(e,"class","touch-none relative"),O(e,"height","100%"),O(e,"width","100%"),O(e,"background-color",mt),Ve(()=>l[16].call(e))},m(s,r){k(s,e,r),i&&i.m(e,null),M(e,t);for(let c=0;c<a.length;c+=1)a[c].m(e,null);l[15](e),n=Ze(e,l[16].bind(e))},p(s,r){if(s[3]?i&&(i.d(1),i=null):i||(i=Re(),i.c(),i.m(e,t)),r[0]&487){o=s[5];let c;for(c=0;c<o.length;c+=1){const u=De(s,o,c);a[c]?a[c].p(u,r):(a[c]=je(u),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},i:j,o:j,d(s){s&&y(e),i&&i.d(),$e(a,s),l[15](null),n()}}}let x=50,fe="#444",de="#aaa",mt="#FFF";function bt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function pt(l,e,t){const n=J();let{value:i}=e,o,a=400,s=400;const r=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let c={},u={},d=[],w=[],C=!0,q=!0,W=!1,F=!1,A=!1,E=null,h=null,P=null,K=null;_e(()=>{Object.keys(c).forEach(f=>{u[f]=c[f].getContext("2d")}),E=new ht({radius:x/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),h=x,K=new it((f,_)=>We(f,_)),K.observe(P),oe(),t(13,o=!0),window.setTimeout(()=>{const f=window.innerWidth/2,_=window.innerHeight/2;E.update({x:f-h/4,y:_},{both:!0}),E.update({x:f+h/4,y:_},{both:!1}),C=!0,q=!0,Q()},100)}),xe(()=>{t(13,o=!1),K.unobserve(P)});function ie(){const f=w.slice(0,-1);Q(),se({lines:f}),ke()}let ae=()=>JSON.stringify({lines:w,width:a,height:s}),m=f=>{if(typeof f!="string")throw new Error("save_data needs to be of type string!");const{lines:_,width:g,height:I}=JSON.parse(f);if(!_||typeof _.push!="function")throw new Error("save_data.lines needs to be an array!");if(Q(),g===a&&I===s)se({lines:_});else{const R=a/g,G=s/I;se({lines:_.map(V=>Ce(Se({},V),{points:V.points.map(Z=>({x:Z.x*R,y:Z.y*G})),brush_radius:V.brush_radius}))})}},se=({lines:f})=>{f.forEach(_=>{const{points:g,brush_color:I,brush_radius:R}=_;pe({points:g,brush_color:I,brush_radius:R}),d=g,ve()})},Ue=f=>{f.preventDefault(),t(3,A=!0),F=!0;const{x:_,y:g}=me(f);f.touches&&f.touches.length>0&&E.update({x:_,y:g},{both:!0}),be(_,g)},ge=f=>{f.preventDefault();const{x:_,y:g}=me(f);be(_,g)},qe=f=>{f.preventDefault(),ge(f),W=!1,F=!1,ve()},We=f=>{const _=ae();for(const g of f){const{width:I,height:R}=g.contentRect;re(c.interface,I,R),re(c.drawing,I,R),re(c.temp,I,R),oe({once:!0})}m(_)},re=(f,_,g)=>{f.width=_*3,f.height=g*3,f.style.width=_,f.style.height=g},me=f=>{const _=c.interface.getBoundingClientRect();let g=f.clientX,I=f.clientY;return f.changedTouches&&f.changedTouches.length>0&&(g=f.changedTouches[0].clientX,I=f.changedTouches[0].clientY),{x:g-_.left,y:I-_.top}},be=(f,_)=>{E.update({x:f*3,y:_*3});const g=!E.isEnabled();(F&&!W||g&&F)&&(W=!0,d.push(E.brush.toObject())),W&&(d.push(E.brush.toObject()),pe({points:d,brush_color:fe,brush_radius:x})),C=!0},pe=({points:f,brush_color:_,brush_radius:g})=>{u.temp.lineJoin="round",u.temp.lineCap="round",u.temp.strokeStyle=_,u.temp.clearRect(0,0,u.temp.canvas.width,u.temp.canvas.height),u.temp.lineWidth=g;let I=f[0],R=f[1];u.temp.moveTo(R.x,R.y),u.temp.beginPath();for(var G=1,V=f.length;G<V;G++){var Z=bt(I,R);u.temp.quadraticCurveTo(I.x,I.y,Z.x,Z.y),I=f[G],R=f[G+1]}u.temp.lineTo(I.x,I.y),u.temp.stroke()},ve=()=>{if(d.length<2)return;w.push({points:[...d],brush_color:fe,brush_radius:x}),d.length=0;const f=c.temp.width,_=c.temp.height;u.drawing.drawImage(c.temp,0,0,f,_),u.temp.clearRect(0,0,f,_),ke()},ke=()=>{n("change",ye())};function Q(){t(3,A=!1),w=[],q=!0,u.drawing.clearRect(0,0,c.drawing.width,c.drawing.height),u.temp.clearRect(0,0,c.temp.width,c.temp.height),u.drawing.fillStyle="#FFFFFF",u.drawing.fillRect(0,0,c.drawing.width,c.drawing.height)}let oe=({once:f=!1}={})=>{if(C||q){const _=E.getPointerCoordinates(),g=E.getBrushCoordinates();Pe(u.interface,_,g),C=!1,q=!1}f||window.requestAnimationFrame(()=>{oe()})},Pe=(f,_,g)=>{f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.fillStyle=fe,f.arc(g.x,g.y,x/2,0,Math.PI*2,!0),f.fill(),f.beginPath(),f.fillStyle=de,f.arc(_.x,_.y,4,0,Math.PI*2,!0),f.fill(),E.isEnabled()&&(f.beginPath(),f.lineWidth=2,f.lineCap="round",f.setLineDash([2,4]),f.strokeStyle=de,f.stroke()),f.beginPath(),f.fillStyle=de,f.arc(g.x,g.y,2,0,Math.PI*2,!0),f.fill()};function ye(){return c.drawing.toDataURL("image/png")}function He(f,_){H[f?"unshift":"push"](()=>{c[_]=f,t(2,c)})}function Ne(f){H[f?"unshift":"push"](()=>{P=f,t(4,P)})}function Xe(){a=this.offsetWidth,s=this.offsetHeight,t(0,a),t(1,s)}return l.$$set=f=>{"value"in f&&t(9,i=f.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&o&&!i&&Q()},[a,s,c,A,P,r,Ue,ge,qe,i,ie,Q,ye,o,He,Ne,Xe]}class vt extends N{constructor(e){super(),X(this,e,pt,gt,Y,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}var kt="./assets/undo.f4cff58b.svg",yt="./assets/clear.88e065e8.svg";function wt(l){let e,t,n,i,o;return t=new Me({props:{image:kt,alt:"undo sketch"}}),t.$on("click",l[1]),i=new Me({props:{image:yt,alt:"clear sketch"}}),i.$on("click",l[2]),{c(){e=S("div"),T(t.$$.fragment),n=B(),T(i.$$.fragment),b(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(a,s){k(a,e,s),z(t,e,null),M(e,n),z(i,e,null),o=!0},p:j,i(a){o||(p(t.$$.fragment,a),p(i.$$.fragment,a),o=!0)},o(a){v(t.$$.fragment,a),v(i.$$.fragment,a),o=!1},d(a){a&&y(e),D(t),D(i)}}}function It(l){const e=J();return[e,()=>e("undo"),()=>e("clear")]}class St extends N{constructor(e){super(),X(this,e,It,wt,Y,{})}}function Ct(l){let e,t,n,i,o,a,s,r,c;return{c(){e=S("div"),t=S("div"),n=S("button"),n.textContent="Save",i=B(),o=S("button"),o.textContent="Cancel",a=B(),s=S("div"),b(t,"class","image_editor_buttons"),b(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(u,d){k(u,e,d),M(e,t),M(t,n),M(t,i),M(t,o),M(e,a),M(e,s),l[6](s),r||(c=[L(n,"click",l[4]),L(o,"click",l[5])],r=!0)},p:j,i:j,o:j,d(u){u&&y(e),l[6](null),r=!1,Fe(c)}}}function Mt(l,e,t){let{value:n}=e,i,o;const a=J();function s(){t(1,o=new at(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(s);const r=()=>a("save",o.toDataURL()),c=()=>a("cancel");function u(d){H[d?"unshift":"push"](()=>{i=d,t(0,i)})}return l.$$set=d=>{"value"in d&&t(3,n=d.value)},[i,o,a,n,r,c,u]}class Et extends N{constructor(e){super(),X(this,e,Mt,Ct,Y,{value:3})}}function Tt(l){let e,t;return{c(){e=S("img"),b(e,"class","w-full h-full object-contain svelte-i8mnhh"),U(e.src,t=l[0])||b(e,"src",t),b(e,"alt","")},m(n,i){k(n,e,i)},p(n,i){i&1&&!U(e.src,t=n[0])&&b(e,"src",t)},i:j,o:j,d(n){n&&y(e)}}}function zt(l){let e,t,n,i,o,a,s=l[8]==="edit"&&Be(l);return t=new rt({props:{editable:!0}}),t.$on("edit",l[19]),t.$on("clear",l[11]),{c(){s&&s.c(),e=B(),T(t.$$.fragment),n=B(),i=S("img"),b(i,"class","w-full h-full object-contain svelte-i8mnhh"),U(i.src,o=l[0])||b(i,"src",o),b(i,"alt","")},m(r,c){s&&s.m(r,c),k(r,e,c),z(t,r,c),k(r,n,c),k(r,i,c),a=!0},p(r,c){r[8]==="edit"?s?(s.p(r,c),c&256&&p(s,1)):(s=Be(r),s.c(),p(s,1),s.m(e.parentNode,e)):s&&(ne(),v(s,1,1,()=>{s=null}),le()),(!a||c&1&&!U(i.src,o=r[0]))&&b(i,"src",o)},i(r){a||(p(s),p(t.$$.fragment,r),a=!0)},o(r){v(s),v(t.$$.fragment,r),a=!1},d(r){s&&s.d(r),r&&y(e),D(t,r),r&&y(n),r&&y(i)}}}function Dt(l){let e,t;return e=new dt({props:{image:l[0]}}),e.$on("crop",l[12]),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.image=n[0]),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Rt(l){let e,t,n,i;const o=[Ft,Bt],a=[];function s(r,c){return r[2]==="upload"?0:r[2]==="webcam"?1:-1}return~(e=s(l))&&(t=a[e]=o[e](l)),{c(){t&&t.c(),n=he()},m(r,c){~e&&a[e].m(r,c),k(r,n,c),i=!0},p(r,c){let u=e;e=s(r),e===u?~e&&a[e].p(r,c):(t&&(ne(),v(a[u],1,1,()=>{a[u]=null}),le()),~e?(t=a[e],t?t.p(r,c):(t=a[e]=o[e](r),t.c()),p(t,1),t.m(n.parentNode,n)):t=null)},i(r){i||(p(t),i=!0)},o(r){v(t),i=!1},d(r){~e&&a[e].d(r),r&&y(n)}}}function jt(l){let e,t,n,i;e=new St({}),e.$on("undo",l[14]),e.$on("clear",l[15]);let o={value:l[0]};return n=new vt({props:o}),l[16](n),n.$on("change",l[12]),{c(){T(e.$$.fragment),t=B(),T(n.$$.fragment)},m(a,s){z(e,a,s),k(a,t,s),z(n,a,s),i=!0},p(a,s){const r={};s&1&&(r.value=a[0]),n.$set(r)},i(a){i||(p(e.$$.fragment,a),p(n.$$.fragment,a),i=!0)},o(a){v(e.$$.fragment,a),v(n.$$.fragment,a),i=!1},d(a){D(e,a),a&&y(t),l[16](null),D(n,a)}}}function Be(l){let e,t;return e=new Et({props:{value:l[0]}}),e.$on("cancel",l[18]),e.$on("save",l[12]),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Bt(l){let e,t;return e=new st({}),e.$on("capture",l[12]),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p:j,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ft(l){let e,t,n;function i(a){l[17](a)}let o={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[At]},$$scope:{ctx:l}};return l[7]!==void 0&&(o.dragging=l[7]),e=new nt({props:o}),H.push(()=>Ae(e,"dragging",i)),e.$on("load",l[10]),{c(){T(e.$$.fragment)},m(a,s){z(e,a,s),n=!0},p(a,s){const r={};s&2097264&&(r.$$scope={dirty:s,ctx:a}),!t&&s&128&&(t=!0,r.dragging=a[7],Le(()=>t=!1)),e.$set(r)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function At(l){let e,t,n,i,o,a,s,r,c;return{c(){e=S("div"),t=$(l[4]),n=B(),i=S("span"),o=$("- "),a=$(l[5]),s=$(" -"),r=B(),c=$(l[6]),b(i,"class","text-gray-300 svelte-i8mnhh"),b(e,"class","flex flex-col svelte-i8mnhh")},m(u,d){k(u,e,d),M(e,t),M(e,n),M(e,i),M(i,o),M(i,a),M(i,s),M(e,r),M(e,c)},p(u,d){d&16&&ue(t,u[4]),d&32&&ue(a,u[5]),d&64&&ue(c,u[6])},d(u){u&&y(e)}}}function Lt(l){let e,t,n,i,o,a;e=new Oe({props:{image:l[2]==="canvas"?Ee:te,label:l[1]||(l[2]==="canvas"?"Sketch":"Image")}});const s=[jt,Rt,Dt,zt,Tt],r=[];function c(u,d){return u[2]==="canvas"?0:u[0]===null?1:u[3]==="select"?2:u[3]==="editor"?3:4}return i=c(l),o=r[i]=s[i](l),{c(){T(e.$$.fragment),t=B(),n=S("div"),o.c(),b(n,"class","svelte-i8mnhh"),ee(n,"bg-gray-200",l[0]),ee(n,"h-60",l[2]!=="webcam")},m(u,d){z(e,u,d),k(u,t,d),k(u,n,d),r[i].m(n,null),a=!0},p(u,[d]){const w={};d&4&&(w.image=u[2]==="canvas"?Ee:te),d&6&&(w.label=u[1]||(u[2]==="canvas"?"Sketch":"Image")),e.$set(w);let C=i;i=c(u),i===C?r[i].p(u,d):(ne(),v(r[C],1,1,()=>{r[C]=null}),le(),o=r[i],o?o.p(u,d):(o=r[i]=s[i](u),o.c()),p(o,1),o.m(n,null)),d&1&&ee(n,"bg-gray-200",u[0]),d&4&&ee(n,"h-60",u[2]!=="webcam")},i(u){a||(p(e.$$.fragment,u),p(o),a=!0)},o(u){v(e.$$.fragment,u),v(o),a=!1},d(u){D(e,u),u&&y(t),u&&y(n),r[i].d()}}}function Ot(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e,{source:a="upload"}=e,{tool:s="editor"}=e,{drop_text:r="Drop an image file"}=e,{or_text:c="or"}=e,{upload_text:u="click to upload"}=e,d="view",w;function C({detail:m}){t(0,n=m)}function q({detail:m}){t(0,n=null),F("clear")}function W({detail:m}){t(0,n=m),t(8,d="view"),F("edit")}const F=J();let A=!1;const E=()=>w.undo(),h=()=>w.clear();function P(m){H[m?"unshift":"push"](()=>{w=m,t(9,w)})}function K(m){A=m,t(7,A)}const ie=()=>t(8,d="view"),ae=()=>t(8,d="edit");return l.$$set=m=>{"value"in m&&t(0,n=m.value),"label"in m&&t(1,i=m.label),"style"in m&&t(13,o=m.style),"source"in m&&t(2,a=m.source),"tool"in m&&t(3,s=m.tool),"drop_text"in m&&t(4,r=m.drop_text),"or_text"in m&&t(5,c=m.or_text),"upload_text"in m&&t(6,u=m.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&F("change",n),l.$$.dirty&128&&F("drag",A)},[n,i,a,s,r,c,u,A,d,w,C,q,W,o,E,h,P,K,ie,ae]}class Ut extends N{constructor(e){super(),X(this,e,Ot,Lt,Y,{value:0,label:1,style:13,source:2,tool:3,drop_text:4,or_text:5,upload_text:6})}}function qt(l){let e,t;return{c(){e=S("img"),b(e,"class","w-full h-full object-contain"),U(e.src,t=l[0])||b(e,"src",t),b(e,"alt","")},m(n,i){k(n,e,i)},p(n,i){i&1&&!U(e.src,t=n[0])&&b(e,"src",t)},d(n){n&&y(e)}}}function Wt(l){let e,t,n;return{c(){e=S("div"),t=S("img"),U(t.src,n=te)||b(t,"src",n),b(t,"alt",""),b(t,"class","h-6 opacity-20"),b(e,"class","min-h-[16rem] flex justify-center items-center")},m(i,o){k(i,e,o),M(e,t)},p:j,d(i){i&&y(e)}}}function Pt(l){let e,t,n,i;e=new Oe({props:{image:te,label:l[1]||"Image"}});function o(r,c){return r[0]===null?Wt:qt}let a=o(l),s=a(l);return{c(){T(e.$$.fragment),t=B(),s.c(),n=he()},m(r,c){z(e,r,c),k(r,t,c),s.m(r,c),k(r,n,c),i=!0},p(r,[c]){const u={};c&2&&(u.label=r[1]||"Image"),e.$set(u),a===(a=o(r))&&s?s.p(r,c):(s.d(1),s=a(r),s&&(s.c(),s.m(n.parentNode,n)))},i(r){i||(p(e.$$.fragment,r),i=!0)},o(r){v(e.$$.fragment,r),i=!1},d(r){D(e,r),r&&y(t),s.d(r),r&&y(n)}}}function Ht(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e;const a=J();return l.$$set=s=>{"value"in s&&t(0,n=s.value),"label"in s&&t(1,i=s.label),"style"in s&&t(2,o=s.style)},l.$$.update=()=>{l.$$.dirty&1&&n&&a("change",n)},[n,i,o]}class Nt extends N{constructor(e){super(),X(this,e,Ht,Pt,Y,{value:0,label:1,style:2})}}function Xt(l){let e,t,n;function i(a){l[10](a)}let o={style:l[1],source:l[2],tool:l[3],label:l[4],drop_text:l[8]("interface.drop_image"),or_text:l[8]("or"),upload_text:l[8]("interface.click_to_upload")};return l[0]!==void 0&&(o.value=l[0]),e=new Ut({props:o}),H.push(()=>Ae(e,"value",i)),e.$on("edit",l[11]),e.$on("clear",l[12]),e.$on("change",l[13]),e.$on("drag",l[14]),{c(){T(e.$$.fragment)},m(a,s){z(e,a,s),n=!0},p(a,s){const r={};s&2&&(r.style=a[1]),s&4&&(r.source=a[2]),s&8&&(r.tool=a[3]),s&16&&(r.label=a[4]),s&256&&(r.drop_text=a[8]("interface.drop_image")),s&256&&(r.or_text=a[8]("or")),s&256&&(r.upload_text=a[8]("interface.click_to_upload")),!t&&s&1&&(t=!0,r.value=a[0],Le(()=>t=!1)),e.$set(r)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function Yt(l){let e,t;return e=new Nt({props:{value:l[0],label:l[4],style:l[1]}}),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),i&16&&(o.label=n[4]),i&2&&(o.style=n[1]),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Jt(l){let e,t,n,i,o,a;e=new ut({props:{tracked_status:l[5]}});const s=[Yt,Xt],r=[];function c(u,d){return u[6]==="static"?0:1}return n=c(l),i=r[n]=s[n](l),{c(){T(e.$$.fragment),t=B(),i.c(),o=he()},m(u,d){z(e,u,d),k(u,t,d),r[n].m(u,d),k(u,o,d),a=!0},p(u,d){const w={};d&32&&(w.tracked_status=u[5]),e.$set(w);let C=n;n=c(u),n===C?r[n].p(u,d):(ne(),v(r[C],1,1,()=>{r[C]=null}),le(),i=r[n],i?i.p(u,d):(i=r[n]=s[n](u),i.c()),p(i,1),i.m(o.parentNode,o))},i(u){a||(p(e.$$.fragment,u),p(i),a=!0)},o(u){v(e.$$.fragment,u),v(i),a=!1},d(u){D(e,u),u&&y(t),r[n].d(u),u&&y(o)}}}function Gt(l){let e,t;return e=new ot({props:{variant:l[6]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[7]?"green":"grey",padding:!1,$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,[i]){const o={};i&69&&(o.variant=n[6]==="dynamic"&&n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&128&&(o.color=n[7]?"green":"grey"),i&66047&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Kt(l,e,t){let n;et(l,tt,h=>t(8,n=h));let{value:i=null}=e,{default_value:o=null}=e,{style:a=""}=e,{source:s="upload"}=e,{tool:r="editor"}=e,{label:c}=e,{loading_status:u}=e,{mode:d}=e;const w=J();o&&(i=o);let C;function q(h){i=h,t(0,i)}function W(h){ce.call(this,l,h)}function F(h){ce.call(this,l,h)}function A(h){ce.call(this,l,h)}const E=({detail:h})=>t(7,C=h);return l.$$set=h=>{"value"in h&&t(0,i=h.value),"default_value"in h&&t(9,o=h.default_value),"style"in h&&t(1,a=h.style),"source"in h&&t(2,s=h.source),"tool"in h&&t(3,r=h.tool),"label"in h&&t(4,c=h.label),"loading_status"in h&&t(5,u=h.loading_status),"mode"in h&&t(6,d=h.mode)},l.$$.update=()=>{l.$$.dirty&1&&w("change")},[i,a,s,r,c,u,d,C,n,o,q,W,F,A,E]}class Qt extends N{constructor(e){super(),X(this,e,Kt,Gt,Y,{value:0,default_value:9,style:1,source:2,tool:3,label:4,loading_status:5,mode:6})}}var an=Qt;const sn=["static","dynamic"];export{an as Component,un as ExampleComponent,sn as modes};
