{"version":3,"file":"ef7f807e.js","mappings":";;AA4CA;;;AAMA;;AAEA;;;;;AAKA;;;;;AAKA;AAEA;;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAvCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBA;AAoEA;;AApEA;;;;ACEA;;;;;;;;ACCA;;;;ACSA;AACA;;;;;;;AAZA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;ACEA;;ACgCA;AACA;;AAEA;;AApCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;ACqBA;;AAGA;AACA;AACA;;AAEA;AAGA;;AAEA;;;AAGA;;AAGA;AACA;;;;AAIA;;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA7CA;;;;;AC0DA;AACA;;;;;;;;AAlCA;AAMA;;;AAuCA;;;AAMA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AAEA;;;AAIA;;AAEA;AArEA;;;;;;;;;;;;;AAgBA;;;ACLA;;AAGA;;AAEA;;;;;;;AAQA;AACA;AACA;;;;AAIA;AACA;;;;AA1BA;;;;;;;;;;;;;;;AAZA;;;ACoDA;;;AAGA;;AAGA;;;AAMA;;;AAGA;;;AAGA;;;AAIA;;;AAKA;;;AAKA;AACA;AACA;;;;AAIA;AAEA;;;AAKA;;;;;;AAUA;AACA;AACA;;;;;AAjBA;AAuBA;;;;AAMA;;;;AAMA;AAEA;;AAIA;;;AAKA;;;;;AAOA;;;;AAKA;;;;AAIA;;;AAKA;AACA;;;;;AAKA;;;;;;;;AAUA;AACA;AACA;;;;AAZA;AAmBA;;AAQA;AAGA;;AAIA;;;;;AASA;AACA;;;;ACxOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ADqBA;;;AELA;AACA;AACA;;;AAGA;AACA;;;;;;;;;;;;;AAjBA","sources":["webpack://home-assistant-frontend/./src/components/ha-alert.ts","webpack://home-assistant-frontend/./src/components/ha-card.ts","webpack://home-assistant-frontend/./src/components/ha-checkbox.ts","webpack://home-assistant-frontend/./src/components/ha-formfield.ts","webpack://home-assistant-frontend/./src/components/ha-settings-row.ts","webpack://home-assistant-frontend/./src/components/ha-switch.ts","webpack://home-assistant-frontend/./src/components/ha-textfield.ts","webpack://home-assistant-frontend/./src/layouts/hass-subpage.ts","webpack://home-assistant-frontend/./src/components/ha-network.ts","webpack://home-assistant-frontend/./src/panels/config/core/ha-config-network.ts","webpack://home-assistant-frontend/./src/panels/config/core/ha-config-url-form.ts","webpack://home-assistant-frontend/./src/common/string/is_ip_address.ts","webpack://home-assistant-frontend/./src/panels/config/core/ha-config-section-network.ts"],"sourcesContent":["import {\n  mdiAlertCircleOutline,\n  mdiAlertOutline,\n  mdiCheckboxMarkedCircleOutline,\n  mdiClose,\n  mdiInformationOutline,\n} from \"@mdi/js\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport \"./ha-icon-button\";\nimport \"./ha-svg-icon\";\n\nconst ALERT_ICONS = {\n  info: mdiInformationOutline,\n  warning: mdiAlertOutline,\n  error: mdiAlertCircleOutline,\n  success: mdiCheckboxMarkedCircleOutline,\n};\n\ndeclare global {\n  interface HASSDomEvents {\n    \"alert-dismissed-clicked\": undefined;\n  }\n}\n\n@customElement(\"ha-alert\")\nclass HaAlert extends LitElement {\n  @property() public title = \"\";\n\n  @property({ attribute: \"alert-type\" }) public alertType:\n    | \"info\"\n    | \"warning\"\n    | \"error\"\n    | \"success\" = \"info\";\n\n  @property({ type: Boolean }) public dismissable = false;\n\n  @property({ type: Boolean }) public rtl = false;\n\n  public render() {\n    return html`\n      <div\n        class=\"issue-type ${classMap({\n          rtl: this.rtl,\n          [this.alertType]: true,\n        })}\"\n        role=\"alert\"\n      >\n        <div class=\"icon ${this.title ? \"\" : \"no-title\"}\">\n          <slot name=\"icon\">\n            <ha-svg-icon .path=${ALERT_ICONS[this.alertType]}></ha-svg-icon>\n          </slot>\n        </div>\n        <div class=\"content\">\n          <div class=\"main-content\">\n            ${this.title ? html`<div class=\"title\">${this.title}</div>` : \"\"}\n            <slot></slot>\n          </div>\n          <div class=\"action\">\n            <slot name=\"action\">\n              ${this.dismissable\n                ? html`<ha-icon-button\n                    @click=${this._dismiss_clicked}\n                    label=\"Dismiss alert\"\n                    .path=${mdiClose}\n                  ></ha-icon-button>`\n                : \"\"}\n            </slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _dismiss_clicked() {\n    fireEvent(this, \"alert-dismissed-clicked\");\n  }\n\n  static styles = css`\n    .issue-type {\n      position: relative;\n      padding: 8px;\n      display: flex;\n      margin: 4px 0;\n    }\n    .issue-type.rtl {\n      flex-direction: row-reverse;\n    }\n    .issue-type::after {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      opacity: 0.12;\n      pointer-events: none;\n      content: \"\";\n      border-radius: 4px;\n    }\n    .icon {\n      z-index: 1;\n    }\n    .icon.no-title {\n      align-self: center;\n    }\n    .issue-type.rtl > .content {\n      flex-direction: row-reverse;\n      text-align: right;\n    }\n    .content {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n    }\n    .action {\n      z-index: 1;\n      width: min-content;\n      --mdc-theme-primary: var(--primary-text-color);\n    }\n    .main-content {\n      overflow-wrap: anywhere;\n      word-break: break-word;\n      margin-left: 8px;\n      margin-right: 0;\n    }\n    .issue-type.rtl > .content > .main-content {\n      margin-left: 0;\n      margin-right: 8px;\n    }\n    .title {\n      margin-top: 2px;\n      font-weight: bold;\n    }\n    .action mwc-button,\n    .action ha-icon-button {\n      --mdc-theme-primary: var(--primary-text-color);\n      --mdc-icon-button-size: 36px;\n    }\n    .issue-type.info > .icon {\n      color: var(--info-color);\n    }\n    .issue-type.info::after {\n      background-color: var(--info-color);\n    }\n\n    .issue-type.warning > .icon {\n      color: var(--warning-color);\n    }\n    .issue-type.warning::after {\n      background-color: var(--warning-color);\n    }\n\n    .issue-type.error > .icon {\n      color: var(--error-color);\n    }\n    .issue-type.error::after {\n      background-color: var(--error-color);\n    }\n\n    .issue-type.success > .icon {\n      color: var(--success-color);\n    }\n    .issue-type.success::after {\n      background-color: var(--success-color);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-alert\": HaAlert;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-card\")\nexport class HaCard extends LitElement {\n  @property() public header?: string;\n\n  @property({ type: Boolean, reflect: true }) public outlined = false;\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 4px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0px 2px 1px -1px rgba(0, 0, 0, 0.2),\n          0px 1px 1px 0px rgba(0, 0, 0, 0.14),\n          0px 1px 3px 0px rgba(0, 0, 0, 0.12)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      :host([outlined]) {\n        box-shadow: none;\n        border-width: var(--ha-card-border-width, 1px);\n        border-style: solid;\n        border-color: var(\n          --ha-card-border-color,\n          var(--divider-color, #e0e0e0)\n        );\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 48px;\n        padding: 12px 16px 16px;\n        display: block;\n        margin-block-start: 0px;\n        margin-block-end: 0px;\n        font-weight: normal;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid var(--divider-color, #e8e8e8);\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`<h1 class=\"card-header\">${this.header}</h1>`\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-card\": HaCard;\n  }\n}\n","import { CheckboxBase } from \"@material/mwc-checkbox/mwc-checkbox-base\";\nimport { styles } from \"@material/mwc-checkbox/mwc-checkbox.css\";\nimport { css } from \"lit\";\nimport { customElement } from \"lit/decorators\";\n\n@customElement(\"ha-checkbox\")\nexport class HaCheckbox extends CheckboxBase {\n  static override styles = [\n    styles,\n    css`\n      :host {\n        --mdc-theme-secondary: var(--primary-color);\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-checkbox\": HaCheckbox;\n  }\n}\n","import { FormfieldBase } from \"@material/mwc-formfield/mwc-formfield-base\";\nimport { styles } from \"@material/mwc-formfield/mwc-formfield.css\";\nimport { css } from \"lit\";\nimport { customElement } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n@customElement(\"ha-formfield\")\nexport class HaFormfield extends FormfieldBase {\n  protected _labelClick() {\n    const input = this.input;\n    if (input) {\n      input.focus();\n      switch (input.tagName) {\n        case \"HA-CHECKBOX\":\n        case \"HA-RADIO\":\n          (input as any).checked = !(input as any).checked;\n          fireEvent(input, \"change\");\n          break;\n        default:\n          input.click();\n          break;\n      }\n    }\n  }\n\n  static override styles = [\n    styles,\n    css`\n      :host(:not([alignEnd])) ::slotted(ha-switch) {\n        margin-right: 10px;\n      }\n      :host([dir=\"rtl\"]:not([alignEnd])) ::slotted(ha-switch) {\n        margin-left: 10px;\n        margin-right: auto;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-formfield\": HaFormfield;\n  }\n}\n","import \"@polymer/paper-item/paper-item-body\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-settings-row\")\nexport class HaSettingsRow extends LitElement {\n  @property({ type: Boolean, reflect: true }) public narrow!: boolean;\n\n  @property({ type: Boolean, attribute: \"three-line\" })\n  public threeLine = false;\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"prefix-wrap\">\n        <slot name=\"prefix\"></slot>\n        <paper-item-body\n          ?two-line=${!this.threeLine}\n          ?three-line=${this.threeLine}\n        >\n          <slot name=\"heading\"></slot>\n          <div secondary><slot name=\"description\"></slot></div>\n        </paper-item-body>\n      </div>\n      <div class=\"content\"><slot></slot></div>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: flex;\n        padding: 0 16px;\n        align-content: normal;\n        align-self: auto;\n        align-items: center;\n      }\n      paper-item-body {\n        padding: 8px 16px 8px 0;\n      }\n      paper-item-body[two-line] {\n        min-height: calc(\n          var(--paper-item-body-two-line-min-height, 72px) - 16px\n        );\n        flex: 1;\n      }\n      .content {\n        display: contents;\n      }\n      :host(:not([narrow])) .content {\n        display: flex;\n        justify-content: flex-end;\n        flex: 1;\n        padding: 16px 0;\n      }\n      .content ::slotted(*) {\n        width: var(--settings-row-content-width);\n      }\n      :host([narrow]) {\n        align-items: normal;\n        flex-direction: column;\n        border-top: 1px solid var(--divider-color);\n        padding-bottom: 8px;\n      }\n      ::slotted(ha-switch) {\n        padding: 16px 0;\n      }\n      div[secondary] {\n        white-space: normal;\n      }\n      .prefix-wrap {\n        display: contents;\n      }\n      :host([narrow]) .prefix-wrap {\n        display: flex;\n        align-items: center;\n      }\n    `;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-settings-row\": HaSettingsRow;\n  }\n}\n","import { SwitchBase } from \"@material/mwc-switch/deprecated/mwc-switch-base\";\nimport { styles } from \"@material/mwc-switch/deprecated/mwc-switch.css\";\nimport { css } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { forwardHaptic } from \"../data/haptics\";\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends SwitchBase {\n  // Generate a haptic vibration.\n  // Only set to true if the new value of the switch is applied right away when toggling.\n  // Do not add haptic when a user is required to press save.\n  @property({ type: Boolean }) public haptic = false;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.addEventListener(\"change\", () => {\n      if (this.haptic) {\n        forwardHaptic(\"light\");\n      }\n    });\n  }\n\n  static override styles = [\n    styles,\n    css`\n      :host {\n        --mdc-theme-secondary: var(--switch-checked-color);\n      }\n      .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n        background-color: var(--switch-checked-button-color);\n        border-color: var(--switch-checked-button-color);\n      }\n      .mdc-switch.mdc-switch--checked .mdc-switch__track {\n        background-color: var(--switch-checked-track-color);\n        border-color: var(--switch-checked-track-color);\n      }\n      .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n        background-color: var(--switch-unchecked-button-color);\n        border-color: var(--switch-unchecked-button-color);\n      }\n      .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n        background-color: var(--switch-unchecked-track-color);\n        border-color: var(--switch-unchecked-track-color);\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import { TextFieldBase } from \"@material/mwc-textfield/mwc-textfield-base\";\nimport { styles } from \"@material/mwc-textfield/mwc-textfield.css\";\nimport { TemplateResult, html, PropertyValues, css } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-textfield\")\nexport class HaTextField extends TextFieldBase {\n  @property({ type: Boolean }) public invalid?: boolean;\n\n  @property({ attribute: \"error-message\" }) public errorMessage?: string;\n\n  // @ts-ignore\n  @property({ type: Boolean }) public icon?: boolean;\n\n  // @ts-ignore\n  @property({ type: Boolean }) public iconTrailing?: boolean;\n\n  override updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (\n      (changedProperties.has(\"invalid\") &&\n        (this.invalid || changedProperties.get(\"invalid\") !== undefined)) ||\n      changedProperties.has(\"errorMessage\")\n    ) {\n      this.setCustomValidity(\n        this.invalid ? this.errorMessage || \"Invalid\" : \"\"\n      );\n      this.reportValidity();\n    }\n  }\n\n  protected override renderIcon(\n    _icon: string,\n    isTrailingIcon = false\n  ): TemplateResult {\n    const type = isTrailingIcon ? \"trailing\" : \"leading\";\n\n    return html`\n      <span\n        class=\"mdc-text-field__icon mdc-text-field__icon--${type}\"\n        tabindex=${isTrailingIcon ? 1 : -1}\n      >\n        <slot name=\"${type}Icon\"></slot>\n      </span>\n    `;\n  }\n\n  static override styles = [\n    styles,\n    css`\n      .mdc-text-field__input {\n        width: var(--ha-textfield-input-width, 100%);\n      }\n      .mdc-text-field:not(.mdc-text-field--with-leading-icon) {\n        padding: var(--text-field-padding, 0px 16px);\n      }\n      .mdc-text-field__affix--suffix {\n        padding-left: var(--text-field-suffix-padding-left, 12px);\n        padding-right: var(--text-field-suffix-padding-right, 0px);\n      }\n\n      .mdc-text-field:not(.mdc-text-field--disabled)\n        .mdc-text-field__affix--suffix {\n        color: var(--secondary-text-color);\n      }\n\n      .mdc-text-field__icon {\n        color: var(--secondary-text-color);\n      }\n\n      input {\n        text-align: var(--text-field-text-align);\n      }\n\n      /* Chrome, Safari, Edge, Opera */\n      :host([no-spinner]) input::-webkit-outer-spin-button,\n      :host([no-spinner]) input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      /* Firefox */\n      :host([no-spinner]) input[type=\"number\"] {\n        -moz-appearance: textfield;\n      }\n\n      .mdc-text-field__ripple {\n        overflow: hidden;\n      }\n\n      .mdc-text-field {\n        overflow: var(--text-field-overflow);\n      }\n\n      :host-context([style*=\"direction: rtl;\"]) .mdc-floating-label {\n        right: 10px !important;\n        left: initial !important;\n      }\n\n      :host-context([style*=\"direction: rtl;\"])\n        .mdc-text-field--with-leading-icon.mdc-text-field--filled\n        .mdc-floating-label {\n        max-width: calc(100% - 48px);\n        right: 48px !important;\n        left: initial !important;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-textfield\": HaTextField;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, eventOptions, property } from \"lit/decorators\";\nimport { restoreScroll } from \"../common/decorators/restore-scroll\";\nimport \"../components/ha-icon-button-arrow-prev\";\nimport \"../components/ha-menu-button\";\nimport { HomeAssistant } from \"../types\";\n\n@customElement(\"hass-subpage\")\nclass HassSubpage extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public header?: string;\n\n  @property({ type: Boolean, attribute: \"main-page\" }) public mainPage = false;\n\n  @property({ type: String, attribute: \"back-path\" }) public backPath?: string;\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property({ type: Boolean }) public supervisor = false;\n\n  // @ts-ignore\n  @restoreScroll(\".content\") private _savedScrollPos?: number;\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"toolbar\">\n        ${this.mainPage || history.state?.root\n          ? html`\n              <ha-menu-button\n                .hassio=${this.supervisor}\n                .hass=${this.hass}\n                .narrow=${this.narrow}\n              ></ha-menu-button>\n            `\n          : this.backPath\n          ? html`\n              <a href=${this.backPath}>\n                <ha-icon-button-arrow-prev\n                  .hass=${this.hass}\n                ></ha-icon-button-arrow-prev>\n              </a>\n            `\n          : html`\n              <ha-icon-button-arrow-prev\n                .hass=${this.hass}\n                @click=${this._backTapped}\n              ></ha-icon-button-arrow-prev>\n            `}\n\n        <div class=\"main-title\">${this.header}</div>\n        <slot name=\"toolbar-icon\"></slot>\n      </div>\n      <div class=\"content\" @scroll=${this._saveScrollPos}><slot></slot></div>\n    `;\n  }\n\n  @eventOptions({ passive: true })\n  private _saveScrollPos(e: Event) {\n    this._savedScrollPos = (e.target as HTMLDivElement).scrollTop;\n  }\n\n  private _backTapped(): void {\n    history.back();\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n        background-color: var(--primary-background-color);\n      }\n\n      :host([narrow]) {\n        width: 100%;\n        position: fixed;\n      }\n\n      .toolbar {\n        display: flex;\n        align-items: center;\n        font-size: 20px;\n        height: var(--header-height);\n        padding: 0 16px;\n        pointer-events: none;\n        background-color: var(--app-header-background-color);\n        font-weight: 400;\n        color: var(--app-header-text-color, white);\n        border-bottom: var(--app-header-border-bottom, none);\n        box-sizing: border-box;\n      }\n      .toolbar a {\n        color: var(--sidebar-text-color);\n        text-decoration: none;\n      }\n\n      ha-menu-button,\n      ha-icon-button-arrow-prev,\n      ::slotted([slot=\"toolbar-icon\"]) {\n        pointer-events: auto;\n      }\n\n      .main-title {\n        margin: 0 0 0 24px;\n        line-height: 20px;\n        flex-grow: 1;\n      }\n\n      .content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 1px - var(--header-height));\n        overflow-y: auto;\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-subpage\": HassSubpage;\n  }\n}\n","import { mdiStar } from \"@mdi/js\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  nothing,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport {\n  Adapter,\n  IPv4ConfiguredAddress,\n  IPv6ConfiguredAddress,\n  NetworkConfig,\n} from \"../data/network\";\nimport { haStyle } from \"../resources/styles\";\nimport { HomeAssistant } from \"../types\";\nimport \"./ha-checkbox\";\nimport type { HaCheckbox } from \"./ha-checkbox\";\nimport \"./ha-settings-row\";\nimport \"./ha-svg-icon\";\n\nconst format_addresses = (\n  addresses: IPv6ConfiguredAddress[] | IPv4ConfiguredAddress[]\n): TemplateResult =>\n  html`${addresses.map((address, i) => [\n    html`<span>${address.address}/${address.network_prefix}</span>`,\n    i < addresses.length - 1 ? \", \" : nothing,\n  ])}`;\n\nconst format_auto_detected_interfaces = (\n  adapters: Adapter[]\n): Array<TemplateResult | string> =>\n  adapters.map((adapter) =>\n    adapter.auto\n      ? html`${adapter.name}\n        (${format_addresses([...adapter.ipv4, ...adapter.ipv6])})`\n      : \"\"\n  );\n\ndeclare global {\n  interface HASSDomEvents {\n    \"network-config-changed\": { configured_adapters: string[] };\n  }\n}\n@customElement(\"ha-network\")\nexport class HaNetwork extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public networkConfig?: NetworkConfig;\n\n  @state() private _expanded?: boolean;\n\n  protected render(): TemplateResult {\n    if (this.networkConfig === undefined) {\n      return html``;\n    }\n    const configured_adapters = this.networkConfig.configured_adapters || [];\n    return html`\n      <ha-settings-row>\n        <span slot=\"prefix\">\n          <ha-checkbox\n            id=\"auto_configure\"\n            @change=${this._handleAutoConfigureCheckboxClick}\n            .checked=${!configured_adapters.length}\n            name=\"auto_configure\"\n          >\n          </ha-checkbox>\n        </span>\n        <span slot=\"heading\" data-for=\"auto_configure\"> Auto Configure </span>\n        <span slot=\"description\" data-for=\"auto_configure\">\n          Detected:\n          ${format_auto_detected_interfaces(this.networkConfig.adapters)}\n        </span>\n      </ha-settings-row>\n      ${configured_adapters.length || this._expanded\n        ? this.networkConfig.adapters.map(\n            (adapter) =>\n              html`<ha-settings-row>\n                <span slot=\"prefix\">\n                  <ha-checkbox\n                    id=${adapter.name}\n                    @change=${this._handleAdapterCheckboxClick}\n                    .checked=${configured_adapters.includes(adapter.name)}\n                    .adapter=${adapter.name}\n                    name=${adapter.name}\n                  >\n                  </ha-checkbox>\n                </span>\n                <span slot=\"heading\">\n                  Adapter: ${adapter.name}\n                  ${adapter.default\n                    ? html`<ha-svg-icon .path=${mdiStar}></ha-svg-icon>\n                        (Default)`\n                    : \"\"}\n                </span>\n                <span slot=\"description\">\n                  ${format_addresses([...adapter.ipv4, ...adapter.ipv6])}\n                </span>\n              </ha-settings-row>`\n          )\n        : \"\"}\n    `;\n  }\n\n  private _handleAutoConfigureCheckboxClick(ev: Event) {\n    const checkbox = ev.currentTarget as HaCheckbox;\n    if (this.networkConfig === undefined) {\n      return;\n    }\n\n    let configured_adapters = [...this.networkConfig.configured_adapters];\n\n    if (checkbox.checked) {\n      this._expanded = false;\n      configured_adapters = [];\n    } else {\n      this._expanded = true;\n      for (const adapter of this.networkConfig.adapters) {\n        if (adapter.default) {\n          configured_adapters = [adapter.name];\n          break;\n        }\n      }\n    }\n\n    fireEvent(this, \"network-config-changed\", {\n      configured_adapters: configured_adapters,\n    });\n  }\n\n  private _handleAdapterCheckboxClick(ev: Event) {\n    const checkbox = ev.currentTarget as HaCheckbox;\n    const adapter_name = (checkbox as any).name;\n    if (this.networkConfig === undefined) {\n      return;\n    }\n\n    const configured_adapters = [...this.networkConfig.configured_adapters];\n\n    if (checkbox.checked) {\n      configured_adapters.push(adapter_name);\n    } else {\n      const index = configured_adapters.indexOf(adapter_name, 0);\n      configured_adapters.splice(index, 1);\n    }\n\n    fireEvent(this, \"network-config-changed\", {\n      configured_adapters: configured_adapters,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        .error {\n          color: var(--error-color);\n        }\n\n        ha-settings-row {\n          padding: 0;\n        }\n\n        span[slot=\"heading\"],\n        span[slot=\"description\"] {\n          cursor: pointer;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-network\": HaNetwork;\n  }\n}\n","import \"@material/mwc-button/mwc-button\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../../../common/config/is_component_loaded\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-checkbox\";\nimport \"../../../components/ha-network\";\nimport \"../../../components/ha-settings-row\";\nimport { fetchNetworkInfo } from \"../../../data/hassio/network\";\nimport {\n  getNetworkConfig,\n  NetworkConfig,\n  setNetworkConfig,\n} from \"../../../data/network\";\nimport { haStyle } from \"../../../resources/styles\";\nimport type { HomeAssistant } from \"../../../types\";\n\n@customElement(\"ha-config-network\")\nclass ConfigNetwork extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @state() private _networkConfig?: NetworkConfig;\n\n  @state() private _error?: { code: string; message: string };\n\n  protected render(): TemplateResult {\n    if (\n      !this.hass.userData?.showAdvanced ||\n      !isComponentLoaded(this.hass, \"network\")\n    ) {\n      return html``;\n    }\n\n    return html`\n      <ha-card outlined header=\"Network Adapter\">\n        <div class=\"card-content\">\n          ${this._error\n            ? html`\n                <ha-alert alert-type=\"error\"\n                  >${this._error.message || this._error.code}</ha-alert\n                >\n              `\n            : \"\"}\n          <p>\n            Configure which network adapters integrations will use. Currently\n            this setting only affects multicast traffic. A restart is required\n            for these settings to apply.\n          </p>\n          <ha-network\n            @network-config-changed=${this._configChanged}\n            .hass=${this.hass}\n            .networkConfig=${this._networkConfig}\n          ></ha-network>\n        </div>\n        <div class=\"card-actions\">\n          <mwc-button @click=${this._save}>\n            ${this.hass.localize(\n              \"ui.panel.config.core.section.core.core_config.save_button\"\n            )}\n          </mwc-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    if (isComponentLoaded(this.hass, \"network\")) {\n      this._load();\n    }\n  }\n\n  private async _load() {\n    this._error = undefined;\n    try {\n      const coreNetwork = await getNetworkConfig(this.hass);\n      if (isComponentLoaded(this.hass, \"hassio\")) {\n        const supervisorNetwork = await fetchNetworkInfo(this.hass);\n        const interfaces = new Set(\n          supervisorNetwork.interfaces.map((int) => int.interface)\n        );\n        if (interfaces.size) {\n          coreNetwork.adapters = coreNetwork.adapters.filter((adapter) =>\n            interfaces.has(adapter.name)\n          );\n        }\n      }\n      this._networkConfig = coreNetwork;\n    } catch (err: any) {\n      this._error = err.message || err;\n    }\n  }\n\n  private async _save() {\n    this._error = undefined;\n    try {\n      await setNetworkConfig(\n        this.hass,\n        this._networkConfig?.configured_adapters || []\n      );\n    } catch (err: any) {\n      this._error = err.message || err;\n    }\n  }\n\n  private _configChanged(event: CustomEvent): void {\n    this._networkConfig = {\n      ...this._networkConfig!,\n      configured_adapters: event.detail.configured_adapters,\n    };\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        .error {\n          color: var(--error-color);\n        }\n\n        ha-settings-row {\n          padding: 0;\n        }\n\n        .card-actions {\n          display: flex;\n          flex-direction: row-reverse;\n          justify-content: space-between;\n          align-items: center;\n        }\n      `, // row-reverse so we tab first to \"save\"\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-network\": ConfigNetwork;\n  }\n}\n","import \"@material/mwc-button/mwc-button\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../../../common/config/is_component_loaded\";\nimport { isIPAddress } from \"../../../common/string/is_ip_address\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-formfield\";\nimport \"../../../components/ha-switch\";\nimport \"../../../components/ha-textfield\";\nimport type { HaTextField } from \"../../../components/ha-textfield\";\nimport { CloudStatus, fetchCloudStatus } from \"../../../data/cloud\";\nimport { saveCoreConfig } from \"../../../data/core\";\nimport type { PolymerChangedEvent } from \"../../../polymer-types\";\nimport type { HomeAssistant } from \"../../../types\";\n\n@customElement(\"ha-config-url-form\")\nclass ConfigUrlForm extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @state() private _error?: string;\n\n  @state() private _working = false;\n\n  @state() private _external_url?: string;\n\n  @state() private _internal_url?: string;\n\n  @state() private _cloudStatus?: CloudStatus | null;\n\n  @state() private _showCustomExternalUrl = false;\n\n  @state() private _showCustomInternalUrl = false;\n\n  protected render(): TemplateResult {\n    const canEdit = [\"storage\", \"default\"].includes(\n      this.hass.config.config_source\n    );\n    const disabled = this._working || !canEdit;\n\n    if (!this.hass.userData?.showAdvanced || this._cloudStatus === undefined) {\n      return html``;\n    }\n\n    const internalUrl = this._internalUrlValue;\n    const externalUrl = this._externalUrlValue;\n    let hasCloud: boolean;\n    let remoteEnabled: boolean;\n    let httpUseHttps: boolean;\n\n    if (this._cloudStatus === null) {\n      hasCloud = false;\n      remoteEnabled = false;\n      httpUseHttps = false;\n    } else {\n      httpUseHttps = this._cloudStatus.http_use_ssl;\n\n      if (this._cloudStatus.logged_in) {\n        hasCloud = true;\n        remoteEnabled =\n          this._cloudStatus.active_subscription &&\n          this._cloudStatus.prefs.remote_enabled;\n      } else {\n        hasCloud = false;\n        remoteEnabled = false;\n      }\n    }\n\n    return html`\n      <ha-card\n        outlined\n        .header=${this.hass.localize(\"ui.panel.config.url.caption\")}\n      >\n        <div class=\"card-content\">\n          ${!canEdit\n            ? html`\n                <p>\n                  ${this.hass.localize(\n                    \"ui.panel.config.core.section.core.core_config.edit_requires_storage\"\n                  )}\n                </p>\n              `\n            : \"\"}\n          ${this._error ? html`<div class=\"error\">${this._error}</div>` : \"\"}\n\n          <div class=\"description\">\n            ${this.hass.localize(\"ui.panel.config.url.description\")}\n          </div>\n\n          ${hasCloud\n            ? html`\n                <div class=\"row\">\n                  <div class=\"flex\">\n                    ${this.hass.localize(\n                      \"ui.panel.config.url.external_url_label\"\n                    )}\n                  </div>\n                  <ha-formfield\n                    .label=${this.hass.localize(\n                      \"ui.panel.config.url.external_use_ha_cloud\"\n                    )}\n                  >\n                    <ha-switch\n                      .disabled=${disabled}\n                      .checked=${externalUrl === null}\n                      @change=${this._toggleCloud}\n                    ></ha-switch>\n                  </ha-formfield>\n                </div>\n              `\n            : \"\"}\n          ${!this._showCustomExternalUrl\n            ? \"\"\n            : html`\n                <div class=\"row\">\n                  <div class=\"flex\">\n                    ${hasCloud\n                      ? \"\"\n                      : this.hass.localize(\n                          \"ui.panel.config.url.external_url_label\"\n                        )}\n                  </div>\n                  <ha-textfield\n                    class=\"flex\"\n                    name=\"external_url\"\n                    type=\"url\"\n                    .disabled=${disabled}\n                    .value=${externalUrl || \"\"}\n                    @change=${this._handleChange}\n                    placeholder=\"https://example.duckdns.org:8123\"\n                  >\n                  </ha-textfield>\n                </div>\n              `}\n          ${hasCloud || !isComponentLoaded(this.hass, \"cloud\")\n            ? \"\"\n            : html`\n                <div class=\"row\">\n                  <div class=\"flex\"></div>\n                  <a href=\"/config/cloud\"\n                    >${this.hass.localize(\n                      \"ui.panel.config.url.external_get_ha_cloud\"\n                    )}</a\n                  >\n                </div>\n              `}\n          ${!this._showCustomExternalUrl && hasCloud\n            ? html`\n                ${remoteEnabled\n                  ? \"\"\n                  : html`\n                      <ha-alert alert-type=\"error\">\n                        ${this.hass.localize(\n                          \"ui.panel.config.url.ha_cloud_remote_not_enabled\"\n                        )}\n                        <a href=\"/config/cloud\" slot=\"action\"\n                          ><mwc-button\n                            .label=${this.hass.localize(\n                              \"ui.panel.config.url.enable_remote\"\n                            )}\n                          ></mwc-button\n                        ></a>\n                      </ha-alert>\n                    `}\n              `\n            : \"\"}\n\n          <div class=\"row\">\n            <div class=\"flex\">\n              ${this.hass.localize(\"ui.panel.config.url.internal_url_label\")}\n            </div>\n\n            <ha-formfield\n              .label=${this.hass.localize(\n                \"ui.panel.config.url.internal_url_automatic\"\n              )}\n            >\n              <ha-switch\n                .checked=${internalUrl === null}\n                @change=${this._toggleInternalAutomatic}\n              ></ha-switch>\n            </ha-formfield>\n          </div>\n\n          ${!this._showCustomInternalUrl\n            ? \"\"\n            : html`\n                <div class=\"row\">\n                  <div class=\"flex\"></div>\n                  <ha-textfield\n                    class=\"flex\"\n                    name=\"internal_url\"\n                    type=\"url\"\n                    placeholder=\"http://<some IP address>:8123\"\n                    .disabled=${disabled}\n                    .value=${internalUrl || \"\"}\n                    @change=${this._handleChange}\n                  >\n                  </ha-textfield>\n                </div>\n              `}\n          ${\n            // If the user has configured a cert, show an error if\n            httpUseHttps && // there is no internal url configured\n            (!internalUrl ||\n              // the internal url does not start with https\n              !internalUrl.startsWith(\"https://\") ||\n              // the internal url points at an IP address\n              isIPAddress(new URL(internalUrl).hostname))\n              ? html`\n                  <ha-alert\n                    .alertType=${this._showCustomInternalUrl\n                      ? \"info\"\n                      : \"warning\"}\n                    .title=${this.hass.localize(\n                      \"ui.panel.config.url.intenral_url_https_error_title\"\n                    )}\n                  >\n                    ${this.hass.localize(\n                      \"ui.panel.config.url.internal_url_https_error_description\"\n                    )}\n                  </ha-alert>\n                `\n              : \"\"\n          }\n        </div>\n        <div class=\"card-actions\">\n          <mwc-button @click=${this._save} .disabled=${disabled}>\n            ${this.hass.localize(\n              \"ui.panel.config.core.section.core.core_config.save_button\"\n            )}\n          </mwc-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected override firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n\n    this._showCustomInternalUrl = this._internalUrlValue !== null;\n\n    if (isComponentLoaded(this.hass, \"cloud\")) {\n      fetchCloudStatus(this.hass).then((cloudStatus) => {\n        this._cloudStatus = cloudStatus;\n        if (cloudStatus.logged_in) {\n          this._showCustomExternalUrl = this._externalUrlValue !== null;\n        }\n      });\n    } else {\n      this._cloudStatus = null;\n      this._showCustomExternalUrl = true;\n    }\n  }\n\n  private get _internalUrlValue() {\n    return this._internal_url !== undefined\n      ? this._internal_url\n      : this.hass.config.internal_url;\n  }\n\n  private get _externalUrlValue() {\n    return this._external_url !== undefined\n      ? this._external_url\n      : this.hass.config.external_url;\n  }\n\n  private _toggleCloud(ev) {\n    this._showCustomExternalUrl = !ev.currentTarget.checked;\n  }\n\n  private _toggleInternalAutomatic(ev) {\n    this._showCustomInternalUrl = !ev.currentTarget.checked;\n  }\n\n  private _handleChange(ev: PolymerChangedEvent<string>) {\n    const target = ev.currentTarget as HaTextField;\n    this[`_${target.name}`] = target.value || null;\n  }\n\n  private async _save() {\n    this._working = true;\n    this._error = undefined;\n    try {\n      await saveCoreConfig(this.hass, {\n        external_url: this._showCustomExternalUrl\n          ? this._external_url || null\n          : null,\n        internal_url: this._showCustomInternalUrl\n          ? this._internal_url || null\n          : null,\n      });\n    } catch (err: any) {\n      this._error = err.message || err;\n    } finally {\n      this._working = false;\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      .description {\n        margin-bottom: 1em;\n      }\n      .row {\n        display: flex;\n        flex-direction: row;\n        margin: 0 -8px;\n        align-items: center;\n        padding: 8px 0;\n      }\n\n      .secondary {\n        color: var(--secondary-text-color);\n      }\n\n      .flex {\n        flex: 1;\n      }\n\n      .row > * {\n        margin: 0 8px;\n      }\n      .error {\n        color: var(--error-color);\n      }\n\n      .card-actions {\n        text-align: right;\n      }\n\n      a {\n        color: var(--primary-color);\n        text-decoration: none;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-url-form\": ConfigUrlForm;\n  }\n}\n","const regexp =\n  /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\n\nexport const isIPAddress = (input: string): boolean => regexp.test(input);\n","import { css, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport \"../../../layouts/hass-subpage\";\nimport type { HomeAssistant, Route } from \"../../../types\";\nimport \"./ha-config-network\";\nimport \"./ha-config-url-form\";\n\n@customElement(\"ha-config-section-network\")\nclass HaConfigSectionNetwork extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-subpage\n        back-path=\"/config/system\"\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .header=${this.hass.localize(\"ui.panel.config.network.caption\")}\n      >\n        <div class=\"content\">\n          <ha-config-url-form .hass=${this.hass}></ha-config-url-form>\n          <ha-config-network .hass=${this.hass}></ha-config-network>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static styles = css`\n    .content {\n      padding: 28px 20px 0;\n      max-width: 1040px;\n      margin: 0 auto;\n    }\n    ha-config-network {\n      display: block;\n      margin-top: 24px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-section-network\": HaConfigSectionNetwork;\n  }\n}\n"],"names":[],"sourceRoot":""}