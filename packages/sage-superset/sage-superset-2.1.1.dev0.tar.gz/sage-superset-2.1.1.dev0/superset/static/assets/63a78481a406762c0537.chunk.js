(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2229],{589075:(e,t,r)=>{"use strict";var o;e=r.nmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=r(667294),s=u(n),i=u(r(237483));function u(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,p,h={from:i.default.number,to:i.default.number.isRequired,speed:i.default.number.isRequired,delay:i.default.number,onComplete:i.default.func,digits:i.default.number,className:i.default.string,tagName:i.default.string,children:i.default.func,easing:i.default.func},f={from:0,delay:100,digits:0,tagName:"span",easing:function(e){return e}},m=function(e){function t(e){_(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.from;return r.state={counter:o},r.start=r.start.bind(r),r.clear=r.clear.bind(r),r.next=r.next.bind(r),r.updateCounter=r.updateCounter.bind(r),r}return l(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.start()}),5e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,r=t.from,o=t.to;e.to===o&&e.from===r||this.start(e)}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.clear();var r=t.from;this.setState({counter:r},(function(){var t=e.props,r=t.speed,o=t.delay,a=Date.now();e.endDate=a+r,e.scheduleNextUpdate(a,o),e.raf=requestAnimationFrame(e.next)}))}},{key:"next",value:function(){var e=Date.now(),t=this.props,r=t.speed,o=t.onComplete,a=t.delay;if(e>=this.nextUpdate){var n=Math.max(0,Math.min(1,1-(this.endDate-e)/r));this.updateCounter(n),this.scheduleNextUpdate(e,a)}e<this.endDate?this.raf=requestAnimationFrame(this.next):o&&o()}},{key:"scheduleNextUpdate",value:function(e,t){this.nextUpdate=Math.min(e+t,this.endDate)}},{key:"updateCounter",value:function(e){var t=this.props,r=t.from,o=r+(t.to-r)*(0,t.easing)(e);this.setState({counter:o})}},{key:"clear",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.digits,o=e.tagName,a=e.children,n=this.state.counter.toFixed(r);return a?a(n):s.default.createElement(o,{className:t},String(n).replace(/(\d)(?=(\d{3})+$)/g,"$1,"))}}]),t}(n.PureComponent);m.propTypes=h,m.defaultProps=f,t.default=m,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(a,"_createClass","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(s,"_react2","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(i,"_propTypes2","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(u,"_interopRequireDefault","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(_,"_classCallCheck","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(c,"_possibleConstructorReturn","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(l,"_inherits","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(h,"propTypes","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(f,"defaultProps","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js"),d.register(m,"CountTo","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/dist/react-count-to.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},838500:(e,t,r)=>{"use strict";var o;e=r.nmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,n,s=r(557955);function i(){}function u(){}u.resetWarningCache=i,e.exports=function(){function e(e,t,r,o,a,n){if(n!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:u,resetWarningCache:i};return r.PropTypes=r,r},(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(i,"emptyFunction","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/node_modules/prop-types/factoryWithThrowingShims.js"),a.register(u,"emptyFunctionWithReset","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/node_modules/prop-types/factoryWithThrowingShims.js")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)},237483:(e,t,r)=>{var o,a,n;e=r.nmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,e.exports=r(838500)(),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(void 0,"throwOnDirectAccess","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/node_modules/prop-types/index.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)},557955:(e,t,r)=>{"use strict";var o;e=r.nmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,n,s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=s,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(s,"ReactPropTypesSecret","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/node_modules/react-count-to/node_modules/prop-types/lib/ReactPropTypesSecret.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)},332229:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(767190),_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(455867),_superset_ui_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(208608),_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(740962),_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(67869),_superset_ui_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(751995),react_count_to__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(589075),react_count_to__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_count_to__WEBPACK_IMPORTED_MODULE_1__),_components_Echart__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(263475),_emotion_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(813198),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const defaultNumberFormatter=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.JB)(),PROPORTION={KICKER:.1,HEADER:.3,SUBHEADER:.125,TRENDLINE:.3};class BigNumberVis extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{getClassName(){const{className:e,showTrendLine:t,bigNumberFallback:r}=this.props,o=`superset-legacy-chart-big-number ${e} ${r?"is-fallback-value":""}`;return t?o:`${o} no-trendline`}createTemporaryContainer(){const e=document.createElement("div");return e.className=this.getClassName(),e.style.position="absolute",e.style.opacity="0",e}renderFallbackWarning(){const{bigNumberFallback:e,formatTime:t,showTimestamp:r}=this.props;return!e||r?null:(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("span",{className:"alert alert-warning",role:"alert",title:(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)("Last available value seen on %s",t(e[0]))},(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)("Not up to date"))}renderKicker(e){const{timestamp:t,showTimestamp:r,formatTime:o,width:a}=this.props;if(!r)return null;const n=null===t?"":o(t),s=this.createTemporaryContainer();document.body.append(s);const i=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.Z)({text:n,maxWidth:a,maxHeight:e,className:"kicker",container:s});return s.remove(),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("div",{className:"kicker",style:{fontSize:i,height:e}},n)}renderHeader(e){const{bigNumber:t,headerFormatter:r,width:o}=this.props,a=null===t?(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)("No data"):r(t),n=this.createTemporaryContainer();document.body.append(n);const s=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.Z)({text:a,maxWidth:o,maxHeight:e,className:"header-line",container:n});return n.remove(),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("div",{className:"header-line",style:{fontSize:s,height:e,fontFamily:"DIN Alternate"}},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)(react_count_to__WEBPACK_IMPORTED_MODULE_1___default(),{from:0,to:parseInt(a.replace(/,/g,""),10),speed:3e3,delay:100}),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("img",{src:"http://192.168.66.110:8081/static/link/logo.png",alt:"logo",className:"mask"}))}renderSubheader(e){const{bigNumber:t,subheader:r,width:o,bigNumberFallback:a}=this.props;let n=0;const s=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)("No data after filtering or data is NULL for the latest time record"),i=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)("Try applying different filters or ensuring your datasource has data");let u=r;if(null===t&&(u=a?i:s),u){const t=this.createTemporaryContainer();return document.body.append(t),n=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.Z)({text:u,maxWidth:o,maxHeight:e,className:"subheader-line",container:t}),t.remove(),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("div",{className:"subheader-line",style:{fontSize:n,height:e}},u)}return null}renderTrendline(e){const{width:t,trendLineData:r,echartOptions:o}=this.props;return null!=r&&r.some((e=>null!==e[1]))?(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)(_components_Echart__WEBPACK_IMPORTED_MODULE_6__.Z,{width:Math.floor(t),height:e,echartOptions:o}):null}render(){const{showTrendLine:e,height:t,kickerFontSize:r,headerFontSize:o,subheaderFontSize:a}=this.props,n=this.getClassName();if(e){const e=Math.floor(PROPORTION.TRENDLINE*t),s=t-e;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("div",{className:n},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("div",{className:"text-container",style:{height:s}},this.renderFallbackWarning(),this.renderKicker(Math.ceil(r*(1-PROPORTION.TRENDLINE)*t)),this.renderHeader(Math.ceil(o*(1-PROPORTION.TRENDLINE)*t)),this.renderSubheader(Math.ceil(a*(1-PROPORTION.TRENDLINE)*t))),this.renderTrendline(e))}return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.tZ)("div",{className:n,style:{height:t}},this.renderFallbackWarning(),this.renderKicker(r*t),this.renderHeader(Math.ceil(o*t)),this.renderSubheader(Math.ceil(a*t)))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}BigNumberVis.defaultProps={className:"",headerFormatter:defaultNumberFormatter,formatTime:_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.Z,headerFontSize:PROPORTION.HEADER,kickerFontSize:PROPORTION.KICKER,mainColor:_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__.E8,showTimestamp:!1,showTrendLine:!1,startYAxisAtZero:!0,subheader:"",subheaderFontSize:PROPORTION.SUBHEADER,timeRangeFixed:!1};const _default=(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_9__.iK)(BigNumberVis)`
  font-family: ${({theme:e})=>e.typography.families.sansSerif};
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;

  &.no-trendline .subheader-line {
    padding-bottom: 0.3em;
  }

  .text-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    .alert {
      font-size: ${({theme:e})=>e.typography.sizes.s};
      margin: -0.5em 0 0.4em;
      line-height: 1;
      padding: 2px 4px 3px;
      border-radius: 3px;
    }
  }

  .kicker {
    font-weight: ${({theme:e})=>e.typography.weights.light};
    line-height: 1em;
    padding-bottom: 2em;
  }

  .header-line {
    font-weight: ${({theme:e})=>e.typography.weights.normal};
    position: relative;
    line-height: 1em;
    span {
      position: absolute;
      bottom: 0;
    }
  }

  .subheader-line {
    font-weight: ${({theme:e})=>e.typography.weights.light};
    line-height: 1em;
    padding-bottom: 0;
  }

  &.is-fallback-value {
    .kicker,
    .header-line,
    .subheader-line {
      opacity: 0.5;
    }
  }

  .superset-data-ui-tooltip {
    z-index: 1000;
    background: #000;
  }
`,__WEBPACK_DEFAULT_EXPORT__=_default;var reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(defaultNumberFormatter,"defaultNumberFormatter","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx"),reactHotLoader.register(PROPORTION,"PROPORTION","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx"),reactHotLoader.register(BigNumberVis,"BigNumberVis","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx"),reactHotLoader.register(_default,"default","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},263475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var o,a=r(667294),n=r(751995),s=r(274888),i=r(813198);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const _=n.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function c({width:e,height:t,echartOptions:r,eventHandlers:o,zrEventHandlers:n,selectedValues:u={}},c){const l=(0,a.useRef)(null),d=(0,a.useRef)(),p=(0,a.useMemo)((()=>Object.keys(u)||[]),[u]),h=(0,a.useRef)([]);return(0,a.useImperativeHandle)(c,(()=>({getEchartInstance:()=>d.current}))),(0,a.useEffect)((()=>{l.current&&(d.current||(d.current=(0,s.S1)(l.current)),Object.entries(o||{}).forEach((([e,t])=>{var r,o;null==(r=d.current)||r.off(e),null==(o=d.current)||o.on(e,t)})),Object.entries(n||{}).forEach((([e,t])=>{var r,o;null==(r=d.current)||r.getZr().off(e),null==(o=d.current)||o.getZr().on(e,t)})),d.current.setOption(r,!0))}),[r,o,n]),(0,a.useEffect)((()=>{d.current&&(d.current.dispatchAction({type:"downplay",dataIndex:h.current.filter((e=>!p.includes(e)))}),p.length&&d.current.dispatchAction({type:"highlight",dataIndex:p}),h.current=p)}),[p]),(0,a.useEffect)((()=>{d.current&&d.current.resize({width:e,height:t})}),[e,t]),(0,i.tZ)(_,{ref:l,height:t,width:e})}u(c,"useRef{divRef}\nuseRef{chartRef}\nuseMemo{currentSelection}\nuseRef{previousSelection}\nuseImperativeHandle{}\nuseEffect{}\nuseEffect{}\nuseEffect{}",(()=>[a.useImperativeHandle]));const l=(0,a.forwardRef)(c),d=l;var p,h;(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(p.register(_,"Styles","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx"),p.register(c,"Echart","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx"),p.register(l,"default","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)}}]);