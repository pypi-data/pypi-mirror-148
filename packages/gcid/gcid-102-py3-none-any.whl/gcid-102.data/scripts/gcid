#!python
# This file is placed in the Public Domain.


"Prosecutor. Reconsider. OTP-CR-117/19."


import os
import readline
import sys


sys.path.insert(0, os.getcwd())


from gcid.obj import Object, get, keys, update
from gcid.obj import Class, Config, Db, find, fntime, last, save
from gcid.obj import edit, format, register
from gcid.cbs import Callbacks
from gcid.cmd import Commands, dispatch
from gcid.shl import CLI
from gcid.shl import cmd as docmd
from gcid.exc import cprint, wait, wrap


import gcid.all


Config.name = "gcid"
Config.workdir = "/var/lib/gcid/"


class CLI(CLI):

    def raw(self, txt):
        cprint(txt)


def cmd(event):
    event.reply(",".join(sorted(Commands.cmd)))


Commands.add(cmd)


def main():
    Callbacks.add("command", dispatch)
    c = CLI()
    return docmd(c, " ".join(sys.argv[1:]))


main()
