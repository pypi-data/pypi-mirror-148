{"version":3,"file":"lib_JupyterWidget_js.22d878849d6fed8b4310.js","mappings":";;;;;;;;;AAAa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,oBAAoB;AACjD,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C,mBAAmB,mBAAO,CAAC,kFAAe;AAC1C,8BAA8B,mBAAO,CAAC,oGAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA,cAAc,wBAAwB;AACtC,cAAc,SAAS,sCAAsC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0BAA0B;AAC1B,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,sEAAsE;AACtE;AACA;AACA,aAAa;AACb,SAAS,GAAG;AACZ;AACA,4DAA4D,SAAS,eAAe;AACpF,8PAA8P,YAAY,+DAA+D,6DAA6D,4BAA4B,yFAAyF,YAAY;AACvgB;AACA,yFAAyF,4BAA4B,+FAA+F,YAAY,2BAA2B,yHAAyH;AACpX;AACA,oBAAoB;AACpB;;;;;;;;;;AC5Fa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,yBAAyB;AACpD,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C,oCAAoC,mBAAO,CAAC,4DAAW;AACvD,oBAAoB,mBAAO,CAAC,oFAAuB;AACnD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,uBAAuB,mBAAO,CAAC,6CAAgB;AAC/C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,wEAAwE,kBAAkB;AAC1F;AACA;AACA;AACA,2DAA2D,uBAAuB,4SAA4S;AAC9X;AACA;AACA,yBAAyB;AACzB,gDAAgD;AAChD;AACA;AACA;AACA,kDAAkD;AAClD,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB;AACxB;;;;;;;;;;AC/Ca;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,qBAAqB,GAAG,8BAA8B;AAC9E,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;;;;;;;;;;AC5Ca;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC,sBAAsB;AACtB,mBAAmB;AACnB","sources":["webpack://qslwidgets/./lib/CommonWidget.js","webpack://qslwidgets/./lib/JupyterWidget.js","webpack://qslwidgets/./lib/hooks.js","webpack://qslwidgets/./lib/version.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultWidgetState = exports.CommonWidget = void 0;\nconst react_1 = __importDefault(require(\"react\"));\nconst material_1 = require(\"@mui/material\");\nconst react_image_labeler_1 = require(\"react-image-labeler\");\nconst defaultWidgetState = {\n    states: [],\n    urls: [],\n    type: \"image\",\n    transitioning: false,\n    config: { image: [], regions: [] },\n    labels: { image: {}, polygons: [], masks: [], boxes: [] },\n    action: \"\",\n    preload: [],\n    maxCanvasSize: 512,\n    maxViewHeight: 512,\n    buttons: {\n        next: true,\n        prev: true,\n        save: true,\n        config: true,\n        delete: true,\n        ignore: true,\n        unignore: true,\n    },\n    base: {\n        serverRoot: \"\",\n        url: \"\",\n    },\n    progress: -1,\n    mode: \"light\",\n};\nexports.defaultWidgetState = defaultWidgetState;\nconst CommonWidget = ({ extract }) => {\n    var _a, _b;\n    const config = extract(\"config\");\n    const states = extract(\"states\");\n    const transitioning = extract(\"transitioning\");\n    const urls = extract(\"urls\");\n    const type = extract(\"type\");\n    const labels = extract(\"labels\");\n    const action = extract(\"action\");\n    const progress = extract(\"progress\");\n    const mode = extract(\"mode\");\n    const buttons = extract(\"buttons\");\n    const preload = extract(\"preload\");\n    const maxCanvasSize = extract(\"maxCanvasSize\");\n    const maxViewHeight = extract(\"maxViewHeight\");\n    const common = {\n        config: {\n            image: ((_a = config.value) === null || _a === void 0 ? void 0 : _a.image) || [],\n            regions: ((_b = config.value) === null || _b === void 0 ? void 0 : _b.regions) || [],\n        },\n        preload: preload.value,\n        options: {\n            progress: progress.value,\n            maxCanvasSize: maxCanvasSize.value,\n            showNavigation: true,\n        },\n        callbacks: {\n            onSave: buttons.value.save\n                ? (updated) => {\n                    labels.set(updated);\n                    action.set(\"save\");\n                }\n                : undefined,\n            onSaveConfig: buttons.value.config ? config.set : undefined,\n            onNext: buttons.value.next ? () => action.set(\"next\") : undefined,\n            onPrev: buttons.value.prev ? () => action.set(\"prev\") : undefined,\n            onDelete: buttons.value.delete ? () => action.set(\"delete\") : undefined,\n            onIgnore: buttons.value.ignore ? () => action.set(\"ignore\") : undefined,\n            onUnignore: buttons.value.unignore\n                ? () => action.set(\"unignore\")\n                : undefined,\n        },\n    };\n    return (react_1.default.createElement(material_1.ThemeProvider, { theme: material_1.createTheme({\n            palette: {\n                mode: mode.value || \"light\",\n            },\n        }) },\n        react_1.default.createElement(material_1.ScopedCssBaseline, null,\n            react_1.default.createElement(material_1.Box, { style: { padding: 16 } },\n                react_1.default.createElement(react_image_labeler_1.Labeler, null, states.value.length === 0 ? null : states.value.length == 1 ? (type.value === \"image\" ? (react_1.default.createElement(react_image_labeler_1.ImageLabeler, Object.assign({}, common, { maxViewHeight: maxViewHeight.value, labels: (labels.value || {}), target: urls.value[0], metadata: transitioning.value ? {} : states.value[0].metadata }))) : (react_1.default.createElement(react_image_labeler_1.VideoLabeler, Object.assign({}, common, { maxViewHeight: maxViewHeight.value, labels: (Array.isArray(labels.value)\n                        ? labels.value\n                        : []), target: urls.value[0], metadata: transitioning.value ? {} : states.value[0].metadata })))) : (react_1.default.createElement(react_image_labeler_1.BatchImageLabeler, Object.assign({}, common, { labels: (labels.value || {}), target: urls.value, states: transitioning.value ? [] : states.value, setStates: (newStates) => states.set(newStates) }))))))));\n};\nexports.CommonWidget = CommonWidget;\n//# sourceMappingURL=CommonWidget.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MediaLabelerView = exports.MediaLabelerModel = void 0;\nconst react_1 = __importDefault(require(\"react\"));\nconst react_dom_1 = __importDefault(require(\"react-dom\"));\nconst coreutils_1 = require(\"@jupyterlab/coreutils\");\nconst base_1 = require(\"@jupyter-widgets/base\");\nconst hooks_1 = require(\"./hooks\");\nconst CommonWidget_1 = require(\"./CommonWidget\");\nconst version_1 = require(\"./version\");\nconst Widget = ({ model }) => {\n    const extract = hooks_1.useModelStateExtractor(model);\n    const base = extract(\"base\");\n    react_1.default.useEffect(() => {\n        base.set({\n            serverRoot: coreutils_1.PageConfig.getOption(\"serverRoot\"),\n            url: coreutils_1.PageConfig.getBaseUrl(),\n        });\n    });\n    return react_1.default.createElement(CommonWidget_1.CommonWidget, { extract: extract });\n};\nclass MediaLabelerModel extends base_1.DOMWidgetModel {\n    defaults() {\n        return Object.assign(Object.assign(Object.assign({}, super.defaults()), { _model_name: MediaLabelerModel.model_name, _model_module: MediaLabelerModel.model_module, _model_module_version: MediaLabelerModel.model_module_version, _view_name: MediaLabelerModel.view_name, _view_module: MediaLabelerModel.view_module, _view_module_version: MediaLabelerModel.view_module_version }), CommonWidget_1.defaultWidgetState);\n    }\n}\nexports.MediaLabelerModel = MediaLabelerModel;\nMediaLabelerModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\nMediaLabelerModel.model_name = \"MediaLabelerModel\";\nMediaLabelerModel.model_module = version_1.MODULE_NAME;\nMediaLabelerModel.model_module_version = version_1.MODULE_VERSION;\nMediaLabelerModel.view_name = \"MediaLabelerView\"; // Set to null if no view\nMediaLabelerModel.view_module = version_1.MODULE_NAME; // Set to null if no view\nMediaLabelerModel.view_module_version = version_1.MODULE_VERSION;\nclass MediaLabelerView extends base_1.DOMWidgetView {\n    render() {\n        this.el.classList.add(\"qsl-image-labeler-widget\");\n        const component = react_1.default.createElement(Widget, {\n            model: this.model,\n        });\n        react_dom_1.default.render(component, this.el);\n    }\n}\nexports.MediaLabelerView = MediaLabelerView;\n//# sourceMappingURL=JupyterWidget.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useModelEvent = exports.useModelState = exports.useModelStateExtractor = void 0;\nconst react_1 = __importDefault(require(\"react\"));\n/**\n *\n * @param name property name in the Python model object.\n * @returns model state and set state function.\n */\nconst useModelState = (name, model) => {\n    const [value, setState] = react_1.default.useState(model === null || model === void 0 ? void 0 : model.get(name));\n    useModelEvent(model, `change:${name}`, (model) => {\n        setState(model.get(name));\n    }, [name]);\n    function set(val, options) {\n        model === null || model === void 0 ? void 0 : model.set(name, val, options);\n        model === null || model === void 0 ? void 0 : model.save_changes();\n    }\n    return { value, set };\n};\nexports.useModelState = useModelState;\nconst useModelStateExtractor = (model) => {\n    return (name) => {\n        return useModelState(name, model);\n    };\n};\nexports.useModelStateExtractor = useModelStateExtractor;\n/**\n * Subscribes a listener to the model event loop.\n * @param event String identifier of the event that will trigger the callback.\n * @param callback Action to perform when event happens.\n * @param deps Dependencies that should be kept up to date within the callback.\n */\nconst useModelEvent = (model, event, callback, deps) => {\n    react_1.default.useEffect(() => {\n        const callbackWrapper = (e) => model && callback(model, e);\n        model === null || model === void 0 ? void 0 : model.on(event, callbackWrapper);\n        return () => void (model === null || model === void 0 ? void 0 : model.unbind(event, callbackWrapper));\n    }, (deps || []).concat([model]));\n};\nexports.useModelEvent = useModelEvent;\n//# sourceMappingURL=hooks.js.map","\"use strict\";\n// Copyright (c) Fausto Morales\n// Distributed under the terms of the MIT License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require(\"../package.json\");\nexports.MODULE_VERSION = data.version;\nexports.MODULE_NAME = data.name;\n//# sourceMappingURL=version.js.map"],"names":[],"sourceRoot":""}