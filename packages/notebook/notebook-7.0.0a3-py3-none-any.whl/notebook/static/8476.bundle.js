"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[8476],{78476:(e,t,i)=>{i.r(t),i.d(t,{FileEditor:()=>m,FileEditorFactory:()=>g,IEditorTracker:()=>l,TabSpaceStatus:()=>d});var s=i(39745),o=i(58939),n=i(41505),r=i(72245),a=i.n(r);function c(e){const t=(e.translator||o.nullTranslator).load("jupyterlab"),i=e.isSpaces?t.__("Spaces"):t.__("Tab Size");return a().createElement(s.TextItem,{onClick:e.handleClick,source:`${i}: ${e.tabSpace}`,title:t.__("Change Tab indentationâ€¦")})}class d extends n.VDomRenderer{constructor(e){super(new d.Model),this._popup=null,this._menu=e.menu,this.translator=e.translator||o.nullTranslator,this.addClass(s.interactiveItem)}render(){return this.model&&this.model.config?a().createElement(c,{isSpaces:this.model.config.insertSpaces,tabSpace:this.model.config.tabSize,handleClick:()=>this._handleClick(),translator:this.translator}):null}_handleClick(){const e=this._menu;this._popup&&this._popup.dispose(),e.aboutToClose.connect(this._menuClosed,this),this._popup=(0,s.showPopup)({body:e,anchor:this,align:"right"})}_menuClosed(){this.removeClass(s.clickedItem)}}!function(e){class t extends n.VDomModel{constructor(){super(...arguments),this._config=null}get config(){return this._config}set config(e){const t=this._config;this._config=e,this._triggerChange(t,this._config)}_triggerChange(e,t){const i=e&&e.insertSpaces,s=e&&e.tabSize,o=t&&t.insertSpaces,n=t&&t.tabSize;i===o&&s===n||this.stateChanged.emit(void 0)}}e.Model=t}(d||(d={}));var h=i(74547);const l=new h.Token("@jupyterlab/fileeditor:IEditorTracker");var u=i(58262),p=i(81217),_=i(28877);class m extends _.Widget{constructor(e){super(),this._ready=new h.PromiseDelegate,this.addClass("jp-FileEditor");const t=this._context=e.context;this._mimeTypeService=e.mimeTypeService;const i=this._editorWidget=new u.CodeEditorWrapper({factory:e.factory,model:t.model});this._editorWidget.addClass("jp-FileEditorCodeWrapper"),this._editorWidget.node.dataset.jpCodeRunner="true",this._editorWidget.node.dataset.jpUndoer="true",this.editor=i.editor,this.model=i.model,t.ready.then((()=>{this._onContextReady()})),t.pathChanged.connect(this._onPathChanged,this),this._onPathChanged(),(this.layout=new _.StackedLayout).addWidget(i)}get context(){return this._context}get ready(){return this.ready}handleEvent(e){this.model&&"mousedown"===e.type&&this._ensureFocus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){this.editor.hasFocus()||this.editor.focus()}_onContextReady(){this.isDisposed||(this.editor.clearHistory(),this._ready.resolve(void 0))}_onPathChanged(){const e=this.editor,t=this._context.localPath;e.model.mimeType=this._mimeTypeService.getMimeTypeByFilePath(t)}}class g extends p.ABCWidgetFactory{constructor(e){super(e.factoryOptions),this._services=e.editorServices}createNewWidget(e){const t=this._services.factoryService.newDocumentEditor,i=new m({factory:e=>t(e),context:e,mimeTypeService:this._services.mimeTypeService});return i.title.icon=n.textEditorIcon,new p.DocumentWidget({content:i,context:e})}}}}]);