Metadata-Version: 2.1
Name: longbridge
Version: 0.1.1
Summary: A Python library for Longbridge Open API
Home-page: https://github.com/longbridgeapp/openapi-python
License: MIT
Author: flisky
Author-email: jifeng.yin@longbridge.sg
Requires-Python: >=3.7,<4.0
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Programming Language :: Python :: Implementation :: PyPy
Classifier: Programming Language :: Rust
Classifier: Topic :: Office/Business :: Financial
Requires-Dist: importlib-metadata (>=4,<5); python_version < "3.8"
Project-URL: Repository, https://github.com/longbridgeapp/openapi-python
Description-Content-Type: text/markdown

# Longbridge OpenAPI SDK for Python

[![PyPI Versions](https://img.shields.io/pypi/pyversions/longbridge.svg)](https://pypi.org/project/longbridge)
[![Read the Docs](https://readthedocs.org/projects/longbridge/badge/?version=latest)](https://longbridge.readthedocs.io/en/latest)

SDK 提供了 HTTP / WebSocket Clients，方便地使用 [Longbridge OpenAPI](https://open.longbridgeapp.com)。

Longbridge OpenAPI SDK 基于 Rust 提供标准实现，通过 FFI 提供给 Python 使用。

目前，我们支持如下系统架构：

-  Linux x86_64 & aarch64
-  Mac x86_64 & aarch64
-  Windows x86_64 & i686

## Installation

```bash
$ pip install longbridge protobuf
```

## Get started

从 https://github.com/longbridgeapp/openapi-protobufs 下载 `quote.proto` 文件。

编译 quote.proto：

```bash
$ protoc --python_out=. quote.proto
```

## Usage

```py
from longbridge.http import Auth, Config, HttpClient
from longbridge.ws import ReadyState, WsCallback, WsClient
from quote_pb2 import (
    Command,
    PushQuote,
    SubscribeRequest,
    SubscriptionResponse,
    SubType,
)

auth = Auth("{app_key}", "{app_secret}", access_token=None)
config = Config(base_url="https://openapi.lbkrs.com")
http = HttpClient(auth, config)

# [获取账户资金](https://open.longbridgeapp.com/docs/trade/asset/account)
response = http.get("/v1/trade/asset/account")
print(f"receive response: {response.body}({response.headers})")

ws = WsClient("wss://openapi-quote.longbridge.xyz", http, MyWsCallback())
# [订阅行情数据](https://open.longbridgeapp.com/docs/quote/subscribe/subscribe)
req = SubscribeRequest(
    symbol=["00700.HK"], sub_type=[SubType.QUOTE], is_first_push=True
)
result = ws.send_request(Command.Subscribe, req.SerializeToString())
resp = SubscriptionResponse()
resp.ParseFromString(result)
print(f"subscribe successfully: {resp.sub_list}")
```

如有其他需求，请提 issue.

